import{r as y,c as pe,o as _e,a as r,b as m,d as e,w as a,e as T,f as me,g as l,h as i,F as N,i as S,j as u,k as he,t as U,n as E,l as fe,A as ge}from"./chunk-1f342eb4.js";import"./chunk-e47d8634.js";const be=["onSubmit"],ke={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},ye=l("label",{for:"form-label"},"Chọn mức giá: ",-1),xe=l("label",{for:"form-label"},"Tìm kiếm: ",-1),we={class:"grid grid-cols-2 gap-3"},Te=l("div",null,[l("button",{class:"btn btn-sm btn-primary w-full lg:mt-[22px]"},[l("i",{class:"fas fa-search"}),u(" Tìm kiếm ")])],-1),Ce=l("i",{class:"fas fa-trash"},null,-1),Be={style:{background:"transparent"},class:"border border-primary rounded-lg p-[1px]"},Me={class:"p-3"},Ne={class:"text-center mb-3"},Se={class:"font-semibold text-lg"},Ke={class:"text-center space-y-3 lg:flex lg:justify-between lg:gap-3 lg:space-y-0"},Ue=l("i",{class:"fas fa-credit-card me-2"},null,-1),$e=["onClick"],Ie=l("i",{class:"fas fa-shopping-cart me-2"},null,-1),Ge=l("span",{class:"hidden lg:inline-block"},"Mua Ngay",-1),Pe=[Ie,Ge],Fe={class:"text-center mt-3"},Ve={class:"list-none"},je={class:"inline-block"},De=["onClick"],Re={class:"inline-block"},Oe=l("hr",{class:"mb-3"},null,-1),Ae={key:0},He=["innerHTML"],Le={class:"space-y-3"},Ee={key:0},qe=l("span",{class:"text-danger-600"},"TẤT CẢ",-1),ze={key:1},Je={key:1},Qe={class:"space-y-3 mb-3"},We={key:0},Xe=l("span",{class:"text-danger-600"},"TẤT CẢ",-1),Ye={key:1},Ze={__name:"Index",props:{groupId:{type:String,default:0}},setup(q){const z=q,C=y({price:"",search:""}),h=y({page:1,limit:12,total_rows:0,total_page:0,visible_pages:[]}),J=pe(()=>{const{page:o,total_page:t,visible_pages:p}=h.value,f=5;let d=Math.max(o-Math.floor(f/2),1),x=Math.min(d+f-1,t);return x-d+1<f&&(d=Math.max(x-f+1,1)),Array.from({length:x-d+1},(j,I)=>d+I)}),Q=o=>{h.value.page!==o&&(h.value.page=o,B())},W=()=>{h.value.page<=1||(h.value.page--,B())},X=()=>{h.value.page>=h.value.total_page||(h.value.page++,B())},Y=y([{label:"Tất cả",value:""},{label:"Dưới 100.000đ",value:"0-100000"},{label:"100.000đ - 200.000đ",value:"100000-200000"},{label:"200.000đ - 500.000đ",value:"200000-500000"},{label:"500.000đ - 1.000.000đ",value:"500000-1000000"},{label:"Trên 1.000.000đ",value:"1000000-0"}]),k=y(!1),$=y([]),B=async()=>{var o,t;k.value=!0;try{const{data:p}=await axios.get("/api/stores/items",{params:{...C.value,group_id:z.groupId,...h.value}});$.value=((o=p.data)==null?void 0:o.data)||[],h.value=((t=p.data)==null?void 0:t.meta)||[]}catch(p){Swal.fire("Thất Bại",$catchMessage(p),"error")}finally{k.value=!1,se()}},Z=()=>{h.value.page=1,B()},ee=()=>{C.value={price:"",search:""},h.value.page=1,B()},te=(o,t="VND",p=2)=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(o)+" ₫",K=y(!1),v=y(null),s=y({Mat_Khau:"",Tai_Khoan:"",isConfirm:!1,Dang_Nhap_Bang:"Riot"}),ae=async o=>{(v.value=o)&&(K.value=!0)},ne=()=>{K.value=!1},le=()=>{K.value=!1},oe=async(o,t)=>{if((o==null?void 0:o.code)===void 0)return;if(o.type==="addfriend"&&t.Ten_In_Game==="")return Swal.fire("Thất Bại","Vui lòng nhập tên tài khoản nhận","error");if(o.type==="user_pass"&&t.Tai_Khoan==="")return Swal.fire("Thất Bại","Vui lòng nhập tài khoản","error");if(o.type==="user_pass"&&t.Mat_Khau==="")return Swal.fire("Thất Bại","Vui lòng nhập mật khẩu","error");if((await Swal.fire({icon:"question",title:"Bạn chắc chứ?",text:`Bạn sẽ mua ${o==null?void 0:o.name} với giá ${o==null?void 0:o.price_str}?`,showCancelButton:!0,confirmButtonText:"Mua ngay",cancelButtonText:"Hủy bỏ"})).isConfirmed===!0){Swal.fire({icon:"info",title:"Đang xử lý!",html:"Không được tắt trang này, vui lòng đợi trong giây lát!",timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{}});try{const{data:f}=await axios.post("/api/stores/items/"+o.code+"/buy",t);Swal.fire("Thành Công",f.message,"success").then(()=>{window.open("/account/orders/items/"+f.data.code,"_self")})}catch(f){Swal.fire("Thất Bại",$catchMessage(f),"error")}}},se=()=>{window.scrollTo({top:0,behavior:"smooth"})};return _e(()=>{B()}),(o,t)=>{var A,H,L;const p=r("a-select-option"),f=r("a-select"),d=r("a-input"),x=r("a-spin"),j=r("a-skeleton"),I=r("a-card"),M=r("a-col"),G=r("a-row"),ie=r("a-image"),F=r("a-button"),re=r("a-tooltip"),D=r("a-badge-ribbon"),ue=r("a-empty"),R=r("iconify-icon"),de=r("a-tag"),P=r("a-checkbox"),O=r("a-form"),ce=r("a-badge"),ve=r("a-modal");return i(),m("section",null,[e(x,{spinning:k.value},{default:a(()=>[l("form",{class:"mb-5 mt-5",onSubmit:he(Z,["prevent"])},[l("div",ke,[l("div",null,[ye,e(f,{value:C.value.price,"onUpdate:value":t[0]||(t[0]=n=>C.value.price=n),placeholder:"Chọn mức giá",style:{width:"100%"}},{default:a(()=>[(i(!0),m(N,null,S(Y.value,n=>(i(),T(p,{key:n.value,value:n.value},{default:a(()=>[u(U(n.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),l("div",null,[xe,e(d,{value:C.value.search,"onUpdate:value":t[1]||(t[1]=n=>C.value.search=n),placeholder:"Tìm kiếm",style:{width:"100%"}},null,8,["value"])]),l("div",we,[Te,l("div",null,[l("button",{class:"btn btn-sm btn-danger w-full lg:mt-[22px]",type:"button",onClick:t[2]||(t[2]=n=>ee())},[Ce,u(" Đặt lại ")])])])])],40,be)]),_:1},8,["spinning"]),k.value&&((A=$.value)==null?void 0:A.length)===0?(i(),T(G,{key:0,gutter:18},{default:a(()=>[(i(),m(N,null,S(4,n=>e(M,{xs:12,sm:8,lg:6,key:n},{default:a(()=>[e(I,{class:"mb-3"},{default:a(()=>[e(j,{active:""})]),_:1})]),_:2},1024)),64))]),_:1})):(i(),T(x,{key:1,spinning:k.value},{default:a(()=>[e(G,{gutter:18},{default:a(()=>[(i(!0),m(N,null,S($.value,n=>(i(),T(M,{xs:12,md:6,key:n.id,class:"mb-2 mt-2 cursor-pointer"},{default:a(()=>[e(D,{color:"red",text:`${n.discount}%`,class:E({hidden:n.discount<=0}),placement:"start"},{default:a(()=>[e(D,{color:"pink",text:`MS: ${n.code}`,placement:"end"},{default:a(()=>[l("div",Be,[e(ie,{src:n.image,alt:"",style:{width:"300px","max-height":"400px"},class:"rounded-t-lg"},null,8,["src"]),l("div",Me,[l("div",Ne,[l("span",Se,"Đã Bán: "+U(n.sold_count),1)]),l("div",Ke,[e(re,{title:n.discount!==0?`Giá gốc ${te(n.price)}`:""},{default:a(()=>[e(F,{type:"dashed",block:"",class:"dark:text-white"},{default:a(()=>[Ue,u(" "+U(n.price_str),1)]),_:2},1024)]),_:2},1032,["title"]),l("button",{class:"btn btn-sm btn-primary w-full",onClick:_=>ae(n)},Pe,8,$e)])])])]),_:2},1032,["text"])]),_:2},1032,["text","class"])]),_:2},1024))),128))]),_:1})]),_:1},8,["spinning"])),((H=$.value)==null?void 0:H.length)===0&&!k.value?(i(),T(I,{key:2},{default:a(()=>[e(ue,{description:"Không tìm thấy vật phẩm nào trong nhóm này"})]),_:1})):me("",!0),l("div",Fe,[e(x,{spinning:k.value},{default:a(()=>[l("ul",Ve,[l("li",je,[l("a",{href:"javascript:void(0)",onClick:t[3]||(t[3]=n=>W()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px] pl-2"},[e(R,{icon:"material-symbols:arrow-back-ios-rounded"})])]),(i(!0),m(N,null,S(J.value,n=>(i(),m("li",{key:n,class:"inline-block"},[l("a",{href:"javascript:void(0)",onClick:_=>Q(n),class:E(["flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300",{"p-active":h.value.page===n}])},U(n!==-1?n:"..."),11,De)]))),128)),l("li",Re,[l("a",{href:"javascript:void(0)",onClick:t[4]||(t[4]=n=>X()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px]"},[e(R,{icon:"material-symbols:arrow-forward-ios-rounded"})])])])]),_:1},8,["spinning"])]),e(ve,{open:K.value,"onUpdate:open":t[15]||(t[15]=n=>K.value=n),width:820,title:`Mua Vật Phẩm: ${(L=v.value)==null?void 0:L.name}`,onOk:le},{footer:a(()=>{var n;return[e(F,{key:"back",onClick:ne},{default:a(()=>[u("Huỷ")]),_:1}),e(F,{key:"submit",type:"primary",loading:k.value,disabled:((n=s.value)==null?void 0:n.isConfirm)!==!0,onClick:t[5]||(t[5]=_=>oe(v.value,s.value))},{default:a(()=>[u("Thanh Toán")]),_:1},8,["loading","disabled"])]}),default:a(()=>{var n;return[Oe,((n=v.value)==null?void 0:n.type)==="addfriend"?(i(),m("div",Ae,[e(G,{gutter:12,class:"space-y-3"},{default:a(()=>[e(M,{xs:24,md:12},{default:a(()=>{var _,c;return[l("div",{class:"mb-3",innerHTML:(_=v.value)==null?void 0:_.description},null,8,He),l("div",Le,[(i(!0),m(N,null,S((c=v.value)==null?void 0:c.highlights,(b,w)=>(i(),T(de,{key:w,color:"success",class:"copy cursor-pointer","data-clipboard-text":b},{default:a(()=>[u(U(b),1)]),_:2},1032,["data-clipboard-text"]))),128))])]}),_:1}),e(M,{xs:24,md:12},{default:a(()=>[e(O,{model:s.value,class:"space-y-3"},{default:a(()=>{var _,c,b,w;return[e(d,{value:(_=v.value)==null?void 0:_.name,"addon-after":"Sản phẩm",disabled:""},null,8,["value"]),e(d,{value:(c=v.value)==null?void 0:c.price_str,"addon-after":"Giá gốc",disabled:""},null,8,["value"]),e(d,{value:(b=v.value)==null?void 0:b.discount,"addon-after":"Giảm giá","addon-before":"%",disabled:""},null,8,["value"]),((w=v.value)==null?void 0:w.type)=="addfriend"?(i(),m("div",Ee,[e(d,{value:s.value.Tai_Khoan,"onUpdate:value":t[6]||(t[6]=g=>s.value.Tai_Khoan=g),placeholder:"admin#1234","addon-after":"Tài khoản nhận"},null,8,["value"]),e(P,{checked:s.value.isConfirm,"onUpdate:checked":t[7]||(t[7]=g=>s.value.isConfirm=g),class:"mt-2"},{default:a(()=>[u(" Tôi đã kết bạn "),qe,u(" ingame trên ")]),_:1},8,["checked"])])):(i(),m("div",ze,[e(P,{checked:s.value.isConfirm,"onUpdate:checked":t[8]||(t[8]=g=>s.value.isConfirm=g)},{default:a(()=>[u(" Tôi cung cấp đúng tài khoản và mật khẩu ")]),_:1},8,["checked"])]))]}),_:1},8,["model"])]),_:1})]),_:1})])):(i(),m("div",Je,[e(G,{gutter:12,class:"space-y-3"},{default:a(()=>[e(M,{xs:24,md:12},{default:a(()=>{var _;return[l("div",Qe,[e(d,{value:s.value.Tai_Khoan,"onUpdate:value":t[9]||(t[9]=c=>s.value.Tai_Khoan=c),placeholder:"Tài khoản","addon-after":"Tài khoản"},null,8,["value"]),e(d,{value:s.value.Mat_Khau,"onUpdate:value":t[10]||(t[10]=c=>s.value.Mat_Khau=c),placeholder:"Mật khẩu","addon-after":"Mật khẩu",type:"password"},null,8,["value"]),e(f,{value:s.value.Dang_Nhap_Bang,"onUpdate:value":t[11]||(t[11]=c=>s.value.Dang_Nhap_Bang=c),placeholder:"Chọn cách đăng nhập",style:{width:"100%"}},{default:a(()=>[e(p,{value:"Roblox"},{default:a(()=>[u("Đăng Nhập Bằng Roblox")]),_:1}),e(p,{value:"Riot"},{default:a(()=>[u("Đăng Nhập Bằng Riot")]),_:1}),e(p,{value:"Facebook"},{default:a(()=>[u("Đăng Nhập Bằng Facebook")]),_:1}),e(p,{value:"Google"},{default:a(()=>[u("Đăng Nhập Bằng Google")]),_:1}),e(p,{value:"Microsoft"},{default:a(()=>[u("Đăng Nhập Bằng Microsoft")]),_:1}),e(p,{value:"Other"},{default:a(()=>[u("Đăng Nhập ở đâu thì ghi chú")]),_:1})]),_:1},8,["value"])]),l("div",null,[(i(!0),m(N,null,S((_=v.value)==null?void 0:_.highlights,(c,b)=>(i(),T(ce,{key:b,color:"red",text:c},null,8,["text"]))),128))])]}),_:1}),e(M,{xs:24,md:12},{default:a(()=>[e(O,{class:"space-y-3"},{default:a(()=>{var _,c,b,w;return[e(d,{value:(_=v.value)==null?void 0:_.name,"addon-after":"Sản phẩm",disabled:""},null,8,["value"]),e(d,{value:(c=v.value)==null?void 0:c.price_str,"addon-after":"Giá gốc",disabled:""},null,8,["value"]),e(d,{value:(b=v.value)==null?void 0:b.discount,"addon-after":"Giảm giá","addon-before":"%",disabled:""},null,8,["value"]),((w=v.value)==null?void 0:w.type)=="addfriend"?(i(),m("div",We,[e(d,{value:s.value.Ten_In_Game,"onUpdate:value":t[12]||(t[12]=g=>s.value.Ten_In_Game=g),placeholder:"admin#1234","addon-after":"Tài khoản nhận"},null,8,["value"]),e(P,{checked:s.value.isConfirm,"onUpdate:checked":t[13]||(t[13]=g=>s.value.isConfirm=g),class:"mt-2"},{default:a(()=>[u(" Tôi đã kết bạn "),Xe,u(" ingame trên ")]),_:1},8,["checked"])])):(i(),m("div",Ye,[e(P,{checked:s.value.isConfirm,"onUpdate:checked":t[14]||(t[14]=g=>s.value.isConfirm=g)},{default:a(()=>[u(" Tôi cung cấp đúng tài khoản và mật khẩu ")]),_:1},8,["checked"])]))]}),_:1})]),_:1})]),_:1})]))]}),_:1},8,["open","title"])])}}},V=fe({});V.use(ge);V.component("item-index",Ze);V.mount("#app");

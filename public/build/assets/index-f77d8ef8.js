import{r as S,c as K,o as re,a as u,b as g,d as i,w as s,e as v,f as B,g as t,h as c,t as d,F as $,i as C,j as m,k as ce,n as D,l as ie,A as ue}from"./chunk-1f342eb4.js";import"./chunk-e47d8634.js";const de=["onSubmit"],pe={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},_e={for:"form-label"},ge={for:"form-label"},me={class:"grid grid-cols-2 gap-3"},fe={class:"btn btn-sm btn-primary w-full lg:mt-[22px]"},ve=t("i",{class:"fas fa-search"},null,-1),he=t("i",{class:"fas fa-trash"},null,-1),be={key:0},we={style:{background:"transparent"},class:"border border-primary rounded-lg p-[1px]"},ye={class:"text-center text-lg font-bold bg-primary text-white",style:{"margin-top":"-6px"}},xe={class:"p-3"},ke={class:"grid mb-3 gap-3"},$e=t("i",{class:"fa-solid fa-check-circle"},null,-1),Ce=t("i",{class:"fa-solid fa-star"},null,-1),Ie=t("i",{class:"fa-solid fa-check-circle"},null,-1),Se={class:"text-center grid grid-cols-2 gap-3"},Te={class:"col-span-2"},Be={class:"border border-red-500 rounded-lg p-1 font-bold"},Me={class:"text-green-600"},Pe=t("i",{class:"fas fa-credit-card me-2"},null,-1),Ue=["onClick"],Ee=t("i",{class:"fas fa-shopping-cart me-2"},null,-1),Le={class:"text-center mt-3"},je={class:"list-none"},Ne={class:"inline-block"},Fe=["onClick"],Ve={class:"inline-block"},Ae={__name:"Index",props:{groupId:{type:String,default:0}},setup(Q){const G=Q,y=S({price:"",search:""}),o=S({page:1,limit:16,total_rows:0,total_page:0,visible_pages:[]}),q=K(()=>{const{page:e,total_page:n,visible_pages:l}=o.value,_=5;let w=Math.max(e-Math.floor(_/2),1),x=Math.min(w+_-1,n);return x-w+1<_&&(w=Math.max(x-_+1,1)),Array.from({length:x-w+1},(E,k)=>w+k)}),z=e=>{o.value.page!==e&&(o.value.page=e,f())},H=()=>{o.value.page<=1||(o.value.page--,f())},J=()=>{o.value.page>=o.value.total_page||(o.value.page++,f())},W=K(()=>__defaultLang&&__defaultLang==="vn"?[{label:"Tất cả",value:""},{label:"Dưới 100.000đ",value:"0-100000"},{label:"100.000đ - 200.000đ",value:"100000-200000"},{label:"200.000đ - 500.000đ",value:"200000-500000"},{label:"500.000đ - 1.000.000đ",value:"500000-1000000"},{label:"Trên 1.000.000đ",value:"1000000-0"}]:[{label:"All",value:""},{label:"Under $5",value:"0-5"},{label:"$5 - $10",value:"5-10"},{label:"$10 - $20",value:"10-20"},{label:"$20 - $50",value:"20-50"},{label:"Over $50",value:"50-0"}]),h=S(!1),I=S([]),f=async()=>{var e,n;h.value=!0;try{const{data:l}=await axios.get("/api/stores/accounts-v2",{params:{...y.value,group_id:G.groupId,...o.value}});b("page")!==null&&o.value.page!==parseInt(b("page"))&&U("product_id"),o.value.page!==1?ae("page",o.value.page):U("page"),I.value=((e=l.data)==null?void 0:e.data)||[],o.value=((n=l.data)==null?void 0:n.meta)||[]}catch(l){Swal.fire("Oops...",$catchMessage(l),"error")}finally{const l=b("product_id");setTimeout(l?()=>{const _=document.getElementById("card_"+l);_&&_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}:te,500),setTimeout(()=>{h.value=!1},600)}},X=()=>{o.value.page=1,f()},Y=()=>{y.value={price:"",search:""},o.value.page=1,f()},Z=(e,n="VND",l=2)=>$formatCurrency(e,n,l),P=async e=>{if((await Swal.fire({icon:"question",title:$__t("Bạn chắc chứ?"),text:`${$__t("Bạn sẽ mua nick")} #${e.code} ${$__t("với giá")} ${e.price_str}?`,showCancelButton:!0,confirmButtonText:$__t("Đồng ý"),cancelButtonText:$__t("Hủy")})).isConfirmed===!0){Swal.fire({icon:"info",title:$__t("Đang xử lý!"),html:$__t("Không được tắt trang này, vui lòng đợi trong giây lát!"),timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{}});try{const{data:l}=await axios.post("/api/stores/accounts-v2/"+e.code+"/buy");Swal.fire("Great!",l.message,"success").then(()=>{window.open("/account/orders/accounts-v2/"+l.data.code,"_self")})}catch(l){Swal.fire("Oops...",$catchMessage(l),"error")}}},T=()=>{const e=["#C70039","#2E4374","#219C90","#EE9322","#5B0888","#004225","#9400FF"];return e[Math.floor(Math.random()*e.length)]},ee=e=>typeof e=="string"||e instanceof String,te=()=>{window.scrollTo({top:0,behavior:"smooth"})},ae=(e,n)=>{if(parseInt(b(e))===parseInt(n))return;const l=new URL(window.location.href);l.searchParams.set(e,n),window.history.pushState({},"",l)},U=e=>{if(b(e)===null)return;const n=new URL(window.location.href);n.searchParams.delete(e),window.history.pushState({},"",n)},b=e=>new URL(window.location.href).searchParams.get(e);window.addEventListener("popstate",()=>{const e=b("page");e&&o.value.page!==parseInt(e)?(o.value.page=parseInt(e),f()):!e&&o.value.page!==1&&(o.value.page=1,f())});const p=e=>$__t(e);return re(()=>{const e=b("page");e&&(o.value.page=parseInt(e)),f()}),(e,n)=>{var O,R;const l=u("a-select-option"),_=u("a-select"),w=u("a-input"),x=u("a-spin"),E=u("a-image"),k=u("a-tag"),ne=u("a-button"),L=u("a-tooltip"),j=u("a-badge-ribbon"),N=u("a-col"),F=u("a-row"),oe=u("a-skeleton"),V=u("a-card"),le=u("a-empty"),A=u("iconify-icon");return c(),g("section",null,[i(x,{spinning:h.value},{default:s(()=>[t("form",{class:"mb-5 mt-5",onSubmit:ce(X,["prevent"])},[t("div",pe,[t("div",null,[t("label",_e,d(p("Chọn mức giá"))+": ",1),i(_,{value:y.value.price,"onUpdate:value":n[0]||(n[0]=a=>y.value.price=a),placeholder:p("Chọn mức giá"),style:{width:"100%"}},{default:s(()=>[(c(!0),g($,null,C(W.value,a=>(c(),v(l,{key:a.value,value:a.value},{default:s(()=>[m(d(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),t("div",null,[t("label",ge,d(p("Tìm kiếm"))+": ",1),i(w,{value:y.value.search,"onUpdate:value":n[1]||(n[1]=a=>y.value.search=a),placeholder:p("Tìm kiếm mã sản phẩm, trang phục,..."),style:{width:"100%"}},null,8,["value","placeholder"])]),t("div",me,[t("div",null,[t("button",fe,[ve,m(" "+d(p("Tìm kiếm")),1)])]),t("div",null,[t("button",{class:"btn btn-sm btn-danger w-full lg:mt-[22px]",type:"button",onClick:n[2]||(n[2]=a=>Y())},[he,m(" "+d(p("Đặt lại")),1)])])])])],40,de)]),_:1},8,["spinning"]),((O=I.value)==null?void 0:O.length)!==0&&!h.value?(c(),g("div",be,[h.value?(c(),v(F,{key:1,gutter:18},{default:s(()=>[(c(),g($,null,C(16,a=>i(N,{xs:12,sm:8,lg:6,key:a},{default:s(()=>[i(V,{class:"mb-3 h-[303px]"},{default:s(()=>[i(oe,{active:""})]),_:1})]),_:2},1024)),64))]),_:1})):(c(),v(F,{key:0,gutter:18},{default:s(()=>[(c(!0),g($,null,C(I.value,a=>(c(),v(N,{xs:24,md:8,lg:6,key:a.id,class:"mb-2 mt-2 cursor-pointer"},{default:s(()=>[i(j,{color:"red",text:`-${a.discount}%`,class:D({hidden:a.discount<=0}),placement:"start"},{default:s(()=>[i(j,{color:"pink",text:`MS: ${a.code}`,placement:"end"},{default:s(()=>[t("div",we,[i(E,{src:a.image,alt:a.name,width:"100%",height:"sm:200px lg:170px",class:"rounded-t-lg"},null,8,["src","alt"]),t("div",ye,d(a.name),1),t("div",xe,[t("div",ke,[(c(!0),g($,null,C(a.highlights,(r,se)=>(c(),g("div",{key:se,class:"lg:col-span-1"},[ee(r)?(c(),v(k,{key:0,color:T(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:s(()=>[$e,m(" "+d(r),1)]),_:2},1032,["color"])):(r==null?void 0:r.name)!==void 0&&(r==null?void 0:r.value)!=="undefined"?(c(),v(k,{key:1,color:T(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:s(()=>[Ce,m(" "+d(r.name)+": "+d(r.value),1)]),_:2},1032,["color"])):(r==null?void 0:r[0])!==void 0?(c(),v(k,{key:2,color:T(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:s(()=>[Ie,m(" "+d(r[0]),1)]),_:2},1032,["color"])):B("",!0)]))),128))]),t("div",Se,[t("div",Te,[t("div",Be,[m(d(p("Còn lại"))+" ",1),t("span",Me,d(a.amount),1),m(" nick ")])]),i(L,{title:a.discount!==0?`${p("Giá gốc")} ${Z(a.price)}`:""},{default:s(()=>[i(ne,{type:"dashed",block:"",onClick:r=>P(a),class:"dark:text-white"},{default:s(()=>[Pe,m(" "+d(a.price_str),1)]),_:2},1032,["onClick"])]),_:2},1032,["title"]),i(L,{title:a.name},{default:s(()=>[t("button",{class:"btn btn-sm btn-primary w-full",onClick:r=>P(a)},[Ee,t("span",null,d(p("Mua Ngay")),1)],8,Ue)]),_:2},1032,["title"])])])])]),_:2},1032,["text"])]),_:2},1032,["text","class"])]),_:2},1024))),128))]),_:1}))])):B("",!0),((R=I.value)==null?void 0:R.length)===0&&!h.value?(c(),v(V,{key:1},{default:s(()=>[i(le,{description:p("Không tìm thấy tài khoản nào trong nhóm này")},null,8,["description"])]),_:1})):B("",!0),t("div",Le,[i(x,{spinning:h.value},{default:s(()=>[t("ul",je,[t("li",Ne,[t("a",{href:"javascript:void(0)",onClick:n[3]||(n[3]=a=>H()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px] pl-2"},[i(A,{icon:"material-symbols:arrow-back-ios-rounded"})])]),(c(!0),g($,null,C(q.value,a=>(c(),g("li",{key:a,class:"inline-block"},[t("a",{href:"javascript:void(0)",onClick:r=>z(a),class:D(["flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300",{"p-active":o.value.page===a}])},d(a!==-1?a:"..."),11,Fe)]))),128)),t("li",Ve,[t("a",{href:"javascript:void(0)",onClick:n[4]||(n[4]=a=>J()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px]"},[i(A,{icon:"material-symbols:arrow-forward-ios-rounded"})])])])]),_:1},8,["spinning"])])])}}},M=ie({});M.use(ue);M.component("account-index",Ae);M.mount("#app");

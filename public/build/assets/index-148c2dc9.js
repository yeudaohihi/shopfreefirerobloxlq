import{r as f,c as v,o as I,a as r,b as O,d as e,w as n,h as x,e as $,j as b,t as k,f as E,g as p,l as L,A as P}from"./chunk-1f342eb4.js";import"./chunk-e47d8634.js";const G={class:"text-center space-y-3"},H={class:"text-danger-600"},j=p("h6",{class:"text-sm"},"Tổng Thanh Toán",-1),z={__name:"Index",props:{groupId:{type:String,default:0}},setup(C){const B=C,d=f(!1),m=f([]),T=async()=>{var t;d.value=!0;try{const{data:a}=await axios.get("/api/stores/boosting-game",{params:{limit:100,group_id:B.groupId}});m.value=((t=a.data)==null?void 0:t.data)||[]}catch(a){Swal.fire("Thất Bại",$catchMessage(a),"error")}finally{d.value=!1}},_=(t,a="VND",i=2)=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t)+" ₫",S=v(()=>m.value.map(t=>({label:t.name+" - "+_(t.price),value:t.id}))||[]),s=v(()=>m.value.find(t=>t.id===o.value.package)),N=(t,a)=>a.value.toLowerCase().indexOf(t.toLowerCase())>=0,y=v(()=>{var t;return((t=s.value)==null?void 0:t.price)||0}),V=async t=>{var i,c;if(((i=s.value)==null?void 0:i.id)===void 0)return Swal.fire("Thất Bại","Vui lòng chọn gói cần thuê","error");if((await Swal.fire({icon:"question",title:"Bạn chắc chứ?",text:`Bạn sẽ mua gói ${(c=s.value)==null?void 0:c.name} với giá ${_(y.value)}?`,showCancelButton:!0,confirmButtonText:"Mua ngay",cancelButtonText:"Hủy bỏ"})).isConfirmed===!0){Swal.fire({icon:"info",title:"Đang xử lý!",html:"Không được tắt trang này, vui lòng đợi trong giây lát!",timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{}});try{const{data:l}=await axios.post("/api/stores/boosting-game/"+s.value.code+"/buy",t);Swal.fire("Thành Công",l.message,"success").then(()=>{window.open("/account/orders/boosting-game/"+l.data.code,"_self")})}catch(l){Swal.fire("Thất Bại",$catchMessage(l),"error")}}},o=f({package:null,order_note:"",input_user:"",input_pass:"",input_extra:""});return I(()=>{T()}),(t,a)=>{const i=r("a-select"),c=r("a-alert"),l=r("a-form-item"),g=r("a-input"),h=r("a-col"),F=r("a-row"),U=r("a-textarea"),q=r("a-button"),A=r("a-form"),K=r("a-spin"),M=r("a-card");return x(),O("section",null,[e(M,null,{default:n(()=>[e(K,{spinning:d.value},{default:n(()=>[e(A,{layout:"vertical",model:o.value,onFinish:V},{default:n(()=>[e(l,{label:"Chọn Gói Cần Thuê",name:"package",rules:[{required:!0,message:"Vui lòng chọn gói cần thuê"}]},{default:n(()=>{var u;return[e(i,{value:o.value.package,"onUpdate:value":a[0]||(a[0]=D=>o.value.package=D),"show-search":"",placeholder:"Chọn gói dịch vụ cần thuê",options:S.value,"filter-option":N},null,8,["value","options"]),(u=s.value)!=null&&u.descr?(x(),$(c,{key:0,type:"error",class:"mt-2"},{message:n(()=>[b(k(s.value.descr),1)]),_:1})):E("",!0)]}),_:1}),e(F,{gutter:16},{default:n(()=>[e(h,{xs:24,md:8},{default:n(()=>[e(l,{label:"Tài Khoản",name:"input_user",rules:[{required:!0,message:"Vui lòng nhập tài khoản cần cày"}]},{default:n(()=>[e(g,{value:o.value.input_user,"onUpdate:value":a[1]||(a[1]=u=>o.value.input_user=u),placeholder:"Nhập tài khoản cần cày"},null,8,["value"])]),_:1})]),_:1}),e(h,{xs:24,md:8},{default:n(()=>[e(l,{label:"Mật Khẩu",name:"input_pass",rules:[{required:!0,message:"Vui lòng nhập mật khẩu của tài khoản cần cày"}]},{default:n(()=>[e(g,{value:o.value.input_pass,"onUpdate:value":a[2]||(a[2]=u=>o.value.input_pass=u),placeholder:"Nhập mật khẩu của tài khoản đó"},null,8,["value"])]),_:1})]),_:1}),e(h,{xs:24,md:8},{default:n(()=>[e(l,{label:"Cookie / 2FA",name:"input_extra"},{default:n(()=>[e(g,{value:o.value.input_extra,"onUpdate:value":a[3]||(a[3]=u=>o.value.input_extra=u),placeholder:"Có thể nhập chuỗi 2FA hoặc cookie liên quan"},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(l,{label:"Ghi chú",name:"order_note"},{default:n(()=>[e(U,{value:o.value.order_note,"onUpdate:value":a[4]||(a[4]=u=>o.value.order_note=u),placeholder:"Nhập ghi chú cho admin nếu có...",rows:"3"},null,8,["value"])]),_:1}),e(l,null,{default:n(()=>[p("div",G,[p("div",null,[p("h4",null,[p("span",H,k(_(y.value)),1)]),j]),e(q,{type:"primary",htmlType:"submit"},{default:n(()=>[b("Tạo Đơn Hàng")]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1})])}}},w=L({});w.use(P);w.component("boosting-index",z);w.mount("#app");

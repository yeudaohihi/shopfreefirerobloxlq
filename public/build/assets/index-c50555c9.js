import{r as H,c as k,a as g,b as s,g as D,d as y,w as f,u as x,h as n,j as l,F as p,t as r,f as d,n as q,e as G,l as A,A as R}from"./chunk-1f342eb4.js";import{u as U}from"./chunk-7d43cceb.js";import{h as C,a as B}from"./chunk-12ee37c2.js";import"./chunk-e47d8634.js";const E={class:"overflow-auto"},j={class:"mb-5 flex flex-col gap-5 md:flex-row md:items-center"},L={class:"ltr:ml-auto rtl:mr-auto flex gap-x-2"},J={__name:"History",setup(O){const m=H(""),S=[{title:"ID",dataIndex:"id",sorter:!0},{title:"Tài Khoản",dataIndex:"username"},{title:"Nội Dung",dataIndex:"content"},{title:"Địa Chỉ IP",dataIndex:"ip_address"},{title:"Thời Gian",dataIndex:"created_at",sorter:!0},{title:"Cập Nhật",dataIndex:"updated_at",sorter:!0}],w=o=>B.get("/api/accounts/histories",{params:{search:m.value,...o}}),{data:T,current:N,totalPage:z,loading:v,pageSize:P,run:Y,refresh:K}=U(w,{formatResult:o=>{const{data:t,meta:a}=o.data.data;return{data:t??[],totalPage:a.total_rows??0}},defaultParams:[{sort_by:"id",sort_type:"desc",limit:10}],pagination:{currentKey:"page",pageSizeKey:"limit"}}),I=(o,t=null)=>{if(o===null)return"";const a=C(o,C.ISO_8601);return a.isValid()?t?a.format(t):a.format("HH:mm:ss - DD/MM/YYYY"):""},h=k(()=>{var o;return((o=T.value)==null?void 0:o.data)??[]}),M=k(()=>({page:N.value,total:z.value,limit:P.value})),V=(o,t,a)=>{Y({page:o==null?void 0:o.current,limit:o.pageSize,sort_by:a.field,sort_type:a.order==="ascend"?"asc":"desc",...t})};return(o,t)=>{const a=g("a-input"),e=g("a-button"),b=g("a-table");return n(),s("div",E,[D("div",j,[D("div",L,[y(a,{value:m.value,"onUpdate:value":t[0]||(t[0]=_=>m.value=_),placeholder:"Tìm kiếm"},null,8,["value"]),y(e,{type:"primary",loading:x(v),onClick:x(K)},{default:f(()=>[l(" Tìm kiếm ")]),_:1},8,["loading","onClick"])])]),y(b,{dataSource:h.value,columns:S,loading:x(v),pagination:M.value,size:"small",onChange:V,class:"font-medium whitespace-nowrap"},{bodyCell:f(({column:_,text:u})=>[_.dataIndex==="created_at"?(n(),s(p,{key:0},[l(r(I(u)),1)],64)):d("",!0),_.dataIndex==="updated_at"?(n(),s(p,{key:1},[l(r(I(u)),1)],64)):d("",!0)]),_:1},8,["dataSource","loading","pagination"])])}}},Q={class:"overflow-auto"},W={class:"mb-5 flex flex-col gap-5 md:flex-row md:items-center"},X={class:"ltr:ml-auto rtl:mr-auto flex gap-x-2"},Z=["data-clipboard-text"],tt={__name:"Transaction",setup(O){const m=H(""),S=[{title:"ID",dataIndex:"id",sorter:!0},{title:"Mã Giao Dịch",dataIndex:"code",width:"13%"},{title:"Số Dư Trước",dataIndex:"balance_before"},{title:"Số Tiền",dataIndex:"amount"},{title:"Số Dư Sau",dataIndex:"balance_after"},{title:"Nội Dung",dataIndex:"content",width:"30%"},{title:"Tài Khoản",dataIndex:"username"},{title:"Thời Gian",dataIndex:"created_at",sorter:!0},{title:"Cập Nhật",dataIndex:"updated_at",sorter:!0}],w=t=>B.get("/api/accounts/transactions",{params:{search:m.value,...t}}),{data:T,current:N,totalPage:z,loading:v,pageSize:P,run:Y,refresh:K}=U(w,{formatResult:t=>{const{data:a,meta:e}=t.data.data;return{data:a??[],totalPage:e.total_rows??0}},defaultParams:[{sort_by:"id",sort_type:"desc",limit:10}],pagination:{currentKey:"page",pageSizeKey:"limit"}}),I=(t,a=null)=>{if(t===null)return"";const e=C(t,C.ISO_8601);return e.isValid()?a?e.format(a):e.format("HH:mm:ss - DD/MM/YYYY"):""},h=(t,a="VND",e=2)=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t)+" ₫",M=k(()=>{var t;return((t=T.value)==null?void 0:t.data)??[]}),V=k(()=>({page:N.value,total:z.value,limit:P.value})),o=(t,a,e)=>{Y({page:t==null?void 0:t.current,limit:t.pageSize,sort_by:e.field,sort_type:e.order==="ascend"?"asc":"desc",...a})};return(t,a)=>{const e=g("a-input"),b=g("a-button"),_=g("a-table");return n(),s("div",Q,[D("div",W,[D("div",X,[y(e,{value:m.value,"onUpdate:value":a[0]||(a[0]=u=>m.value=u),placeholder:"Tìm kiếm"},null,8,["value"]),y(b,{type:"primary",loading:x(v),onClick:x(K)},{default:f(()=>[l(" Tìm kiếm ")]),_:1},8,["loading","onClick"])])]),y(_,{dataSource:M.value,columns:S,loading:x(v),pagination:V.value,size:"small",onChange:o,class:"font-medium whitespace-nowrap"},{bodyCell:f(({column:u,text:i,record:c})=>[u.dataIndex==="code"?(n(),s("b",{key:0,style:{color:"#191D88"},class:"copy cursor-pointer","data-clipboard-text":i},r(i),9,Z)):d("",!0),u.dataIndex==="balance_before"?(n(),s(p,{key:1},[l(r(h(i)),1)],64)):d("",!0),u.dataIndex==="amount"?(n(),s("span",{key:2,class:q(c.prefix==="-"?"text-danger-600":"text-green-600")},r(c.prefix)+" "+r(h(i)),3)):d("",!0),u.dataIndex==="balance_after"?(n(),s(p,{key:3},[l(r(h(i)),1)],64)):d("",!0),u.dataIndex==="created_at"?(n(),s(p,{key:4},[l(r(I(i)),1)],64)):d("",!0),u.dataIndex==="updated_at"?(n(),s(p,{key:5},[l(r(I(i)),1)],64)):d("",!0)]),_:1},8,["dataSource","loading","pagination"])])}}},at={class:"overflow-auto"},et={class:"mb-5 flex flex-col gap-5 md:flex-row md:items-center"},nt={class:"ltr:ml-auto rtl:mr-auto flex gap-x-2"},ot=["data-clipboard-text"],rt={__name:"CardList",setup(O){const m=H(""),S=[{title:"ID",dataIndex:"id",sorter:!0},{title:"Mã Giao Dịch",dataIndex:"transaction_code",width:"13%"},{title:"Số Serial",dataIndex:"serial"},{title:"Mã Thẻ",dataIndex:"code"},{title:"Thực Nhận",dataIndex:"amount"},{title:"Mệnh Giá",dataIndex:"value"},{title:"Ghi Chú",dataIndex:"content"},{title:"Trạng Thái",dataIndex:"status"},{title:"Tài Khoản",dataIndex:"username"},{title:"Thời Gian",dataIndex:"created_at",sorter:!0},{title:"Cập Nhật",dataIndex:"updated_at",sorter:!0}],w=t=>B.get("/api/accounts/card-list",{params:{search:m.value,...t}}),{data:T,current:N,totalPage:z,loading:v,pageSize:P,run:Y,refresh:K}=U(w,{formatResult:t=>{const{data:a,meta:e}=t.data.data;return{data:a??[],totalPage:e.total_rows??0}},defaultParams:[{sort_by:"id",sort_type:"desc",limit:10}],pagination:{currentKey:"page",pageSizeKey:"limit"}}),I=(t,a=null)=>{if(t===null)return"";const e=C(t,C.ISO_8601);return e.isValid()?a?e.format(a):e.format("HH:mm:ss - DD/MM/YYYY"):""},h=(t,a="VND",e=2)=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t)+" ₫",M=k(()=>{var t;return((t=T.value)==null?void 0:t.data)??[]}),V=k(()=>({page:N.value,total:z.value,limit:P.value})),o=(t,a,e)=>{Y({page:t==null?void 0:t.current,limit:t.pageSize,sort_by:e.field,sort_type:e.order==="ascend"?"asc":"desc",...a})};return(t,a)=>{const e=g("a-input"),b=g("a-button"),_=g("a-tag"),u=g("a-table");return n(),s("div",at,[D("div",et,[D("div",nt,[y(e,{value:m.value,"onUpdate:value":a[0]||(a[0]=i=>m.value=i),placeholder:"Tìm kiếm"},null,8,["value"]),y(b,{type:"primary",loading:x(v),onClick:x(K)},{default:f(()=>[l(" Tìm kiếm ")]),_:1},8,["loading","onClick"])])]),y(u,{dataSource:M.value,columns:S,loading:x(v),pagination:V.value,size:"small",onChange:o,class:"font-medium whitespace-nowrap"},{bodyCell:f(({column:i,text:c,record:F})=>[i.dataIndex==="transaction_code"?(n(),s("b",{key:0,style:{color:"#191D88"},class:"copy cursor-pointer","data-clipboard-text":c},r(c??"- KO CÓ -"),9,ot)):d("",!0),i.dataIndex==="balance_before"?(n(),s(p,{key:1},[l(r(h(c)),1)],64)):d("",!0),i.dataIndex==="amount"?(n(),s("span",{key:2,class:q(c===0?"text-danger-600":"text-green-600")},r(h(c)),3)):d("",!0),i.dataIndex==="status"?(n(),s(p,{key:3},[c==="Processing"?(n(),G(_,{key:0,color:"warning"},{default:f(()=>[l(r(F.status_str),1)]),_:2},1024)):c==="Cancelled"?(n(),G(_,{key:1,color:"red"},{default:f(()=>[l(r(F.status_str),1)]),_:2},1024)):c==="Error"?(n(),G(_,{key:2,color:"red"},{default:f(()=>[l(r(F.status_str),1)]),_:2},1024)):c==="Completed"?(n(),G(_,{key:3,color:"success"},{default:f(()=>[l(r(F.status_str),1)]),_:2},1024)):d("",!0)],64)):d("",!0),i.dataIndex==="value"?(n(),s(p,{key:4},[l(r(h(c)),1)],64)):d("",!0),i.dataIndex==="created_at"?(n(),s(p,{key:5},[l(r(I(c)),1)],64)):d("",!0),i.dataIndex==="updated_at"?(n(),s(p,{key:6},[l(r(I(c)),1)],64)):d("",!0)]),_:1},8,["dataSource","loading","pagination"])])}}},$=A({});$.use(R);$.component("account-history",J);$.component("account-card-list",rt);$.component("account-transaction",tt);$.mount("#app");

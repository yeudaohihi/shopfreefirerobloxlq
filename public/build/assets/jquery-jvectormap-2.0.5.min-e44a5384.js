var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var w=x((S,E)=>{(function(t){var e={set:{colors:1,values:1,backgroundColor:1,scaleColors:1,normalizeFunction:1,focus:1},get:{selectedRegions:1,selectedMarkers:1,mapObject:1,regionName:1}};t.fn.vectorMap=function(a){var i=this.children(".jvectormap-container").data("mapObject");if(a==="addMap")s.Map.maps[arguments[1]]=arguments[2];else{if((a==="set"||a==="get")&&e[a][arguments[1]])return i[a+(arguments[1].charAt(0).toUpperCase()+arguments[1].substr(1))].apply(i,Array.prototype.slice.call(arguments,2));(a=a||{}).container=this,i=new s.Map(a)}return this}})(jQuery),function(t){typeof define=="function"&&define.amd?define(["jquery"],t):typeof S=="object"?E.exports=t:t(jQuery)}(function(t){var e,a,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice;if(t.event.fixHooks)for(var o=i.length;o;)t.event.fixHooks[i[--o]]=t.event.mouseHooks;var h=t.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var p=n.length;p;)this.addEventListener(n[--p],l,!1);else this.onmousewheel=l;t.data(this,"mousewheel-line-height",h.getLineHeight(this)),t.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var p=n.length;p;)this.removeEventListener(n[--p],l,!1);else this.onmousewheel=null},getLineHeight:function(p){return parseInt(t(p)["offsetParent"in t.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(p){return t(p).height()},settings:{adjustOldDeltas:!0}};function l(p){var y,u=p||window.event,c=r.call(arguments,1),v=0,g=0,f=0;if((p=t.event.fix(u)).type="mousewheel","detail"in u&&(f=-1*u.detail),"wheelDelta"in u&&(f=u.wheelDelta),"wheelDeltaY"in u&&(f=u.wheelDeltaY),"wheelDeltaX"in u&&(g=-1*u.wheelDeltaX),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(g=-1*f,f=0),v=f===0?g:f,"deltaY"in u&&(v=f=-1*u.deltaY),"deltaX"in u&&(g=u.deltaX,f===0&&(v=-1*g)),f!==0||g!==0){if(u.deltaMode===1){var M=t.data(this,"mousewheel-line-height");v*=M,f*=M,g*=M}else if(u.deltaMode===2){var b=t.data(this,"mousewheel-page-height");v*=b,f*=b,g*=b}return y=Math.max(Math.abs(f),Math.abs(g)),(!a||y<a)&&d(u,a=y)&&(a/=40),d(u,y)&&(v/=40,g/=40,f/=40),v=Math[1<=v?"floor":"ceil"](v/a),g=Math[1<=g?"floor":"ceil"](g/a),f=Math[1<=f?"floor":"ceil"](f/a),p.deltaX=g,p.deltaY=f,p.deltaFactor=a,p.deltaMode=0,c.unshift(p,v,g,f),e&&clearTimeout(e),e=setTimeout(m,200),(t.event.dispatch||t.event.handle).apply(this,c)}}function m(){a=null}function d(p,y){return h.settings.adjustOldDeltas&&p.type==="mousewheel"&&y%120==0}t.fn.extend({mousewheel:function(p){return p?this.bind("mousewheel",p):this.trigger("mousewheel")},unmousewheel:function(p){return this.unbind("mousewheel",p)}})});var s={inherits:function(t,e){function a(){}a.prototype=e.prototype,t.prototype=new a,(t.prototype.constructor=t).parentClass=e},mixin:function(t,e){var a;for(a in e.prototype)e.prototype.hasOwnProperty(a)&&(t.prototype[a]=e.prototype[a])},min:function(t){var e,a=Number.MAX_VALUE;if(t instanceof Array)for(e=0;e<t.length;e++)t[e]<a&&(a=t[e]);else for(e in t)t[e]<a&&(a=t[e]);return a},max:function(t){var e,a=Number.MIN_VALUE;if(t instanceof Array)for(e=0;e<t.length;e++)t[e]>a&&(a=t[e]);else for(e in t)t[e]>a&&(a=t[e]);return a},keys:function(t){var e,a=[];for(e in t)a.push(e);return a},values:function(t){var e,a,i=[];for(a=0;a<arguments.length;a++)for(e in t=arguments[a])i.push(t[e]);return i},whenImageLoaded:function(t){var e=new s.$.Deferred,a=s.$("<img/>");return a.on("error",function(){e.reject()}).on("load",function(){e.resolve(a)}),a.attr("src",t),e},isImageUrl:function(t){return/\.\w{3,4}$/.test(t)}};s.$=jQuery,Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var a;if(this==null)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(n==0)return-1;var r=+e||0;if(Math.abs(r)===1/0&&(r=0),n<=r)return-1;for(a=Math.max(0<=r?r:n-Math.abs(r),0);a<n;){if(a in i&&i[a]===t)return a;a++}return-1}),s.AbstractElement=function(t,e){this.node=this.createElement(t),this.name=t,this.properties={},e&&this.set(e)},s.AbstractElement.prototype.set=function(t,e){var a;if(typeof t=="object")for(a in t)this.properties[a]=t[a],this.applyAttr(a,t[a]);else this.properties[t]=e,this.applyAttr(t,e)},s.AbstractElement.prototype.get=function(t){return this.properties[t]},s.AbstractElement.prototype.applyAttr=function(t,e){this.node.setAttribute(t,e)},s.AbstractElement.prototype.remove=function(){s.$(this.node).remove()},s.AbstractCanvasElement=function(t,e,a){this.container=t,this.setSize(e,a),this.rootElement=new s[this.classPrefix+"GroupElement"],this.node.appendChild(this.rootElement.node),this.container.appendChild(this.node)},s.AbstractCanvasElement.prototype.add=function(t,e){(e=e||this.rootElement).add(t),t.canvas=this},s.AbstractCanvasElement.prototype.addPath=function(t,e,a){var i=new s[this.classPrefix+"PathElement"](t,e);return this.add(i,a),i},s.AbstractCanvasElement.prototype.addCircle=function(t,e,a){var i=new s[this.classPrefix+"CircleElement"](t,e);return this.add(i,a),i},s.AbstractCanvasElement.prototype.addImage=function(t,e,a){var i=new s[this.classPrefix+"ImageElement"](t,e);return this.add(i,a),i},s.AbstractCanvasElement.prototype.addText=function(t,e,a){var i=new s[this.classPrefix+"TextElement"](t,e);return this.add(i,a),i},s.AbstractCanvasElement.prototype.addGroup=function(t){var e=new s[this.classPrefix+"GroupElement"];return t?t.node.appendChild(e.node):this.node.appendChild(e.node),e.canvas=this,e},s.AbstractShapeElement=function(t,e,a){this.style=a||{},this.style.current=this.style.current||{},this.isHovered=!1,this.isSelected=!1,this.updateStyle()},s.AbstractShapeElement.prototype.setStyle=function(t,e){var a={};typeof t=="object"?a=t:a[t]=e,s.$.extend(this.style.current,a),this.updateStyle()},s.AbstractShapeElement.prototype.updateStyle=function(){var t={};s.AbstractShapeElement.mergeStyles(t,this.style.initial),s.AbstractShapeElement.mergeStyles(t,this.style.current),this.isHovered&&s.AbstractShapeElement.mergeStyles(t,this.style.hover),this.isSelected&&(s.AbstractShapeElement.mergeStyles(t,this.style.selected),this.isHovered&&s.AbstractShapeElement.mergeStyles(t,this.style.selectedHover)),this.set(t)},s.AbstractShapeElement.mergeStyles=function(t,e){var a;for(a in e=e||{})e[a]===null?delete t[a]:t[a]=e[a]},s.SVGElement=function(t,e){s.SVGElement.parentClass.apply(this,arguments)},s.inherits(s.SVGElement,s.AbstractElement),s.SVGElement.svgns="http://www.w3.org/2000/svg",s.SVGElement.prototype.createElement=function(t){return document.createElementNS(s.SVGElement.svgns,t)},s.SVGElement.prototype.addClass=function(t){this.node.setAttribute("class",t)},s.SVGElement.prototype.getElementCtr=function(t){return s["SVG"+t]},s.SVGElement.prototype.getBBox=function(){return this.node.getBBox()},s.SVGGroupElement=function(){s.SVGGroupElement.parentClass.call(this,"g")},s.inherits(s.SVGGroupElement,s.SVGElement),s.SVGGroupElement.prototype.add=function(t){this.node.appendChild(t.node)},s.SVGCanvasElement=function(t,e,a){this.classPrefix="SVG",s.SVGCanvasElement.parentClass.call(this,"svg"),this.defsElement=new s.SVGElement("defs"),this.node.appendChild(this.defsElement.node),s.AbstractCanvasElement.apply(this,arguments)},s.inherits(s.SVGCanvasElement,s.SVGElement),s.mixin(s.SVGCanvasElement,s.AbstractCanvasElement),s.SVGCanvasElement.prototype.setSize=function(t,e){this.width=t,this.height=e,this.node.setAttribute("width",t),this.node.setAttribute("height",e)},s.SVGCanvasElement.prototype.applyTransformParams=function(t,e,a){this.scale=t,this.transX=e,this.transY=a,this.rootElement.node.setAttribute("transform","scale("+t+") translate("+e+", "+a+")")},s.SVGShapeElement=function(t,e,a){s.SVGShapeElement.parentClass.call(this,t,e),s.AbstractShapeElement.apply(this,arguments)},s.inherits(s.SVGShapeElement,s.SVGElement),s.mixin(s.SVGShapeElement,s.AbstractShapeElement),s.SVGShapeElement.prototype.applyAttr=function(t,e){var a,i,n=this;t==="fill"&&s.isImageUrl(e)?s.SVGShapeElement.images[e]?this.applyAttr("fill","url(#image"+s.SVGShapeElement.images[e]+")"):s.whenImageLoaded(e).then(function(r){(i=new s.SVGElement("image")).node.setAttributeNS("http://www.w3.org/1999/xlink","href",e),i.applyAttr("x","0"),i.applyAttr("y","0"),i.applyAttr("width",r[0].width),i.applyAttr("height",r[0].height),(a=new s.SVGElement("pattern")).applyAttr("id","image"+s.SVGShapeElement.imageCounter),a.applyAttr("x",0),a.applyAttr("y",0),a.applyAttr("width",r[0].width/2),a.applyAttr("height",r[0].height/2),a.applyAttr("viewBox","0 0 "+r[0].width+" "+r[0].height),a.applyAttr("patternUnits","userSpaceOnUse"),a.node.appendChild(i.node),n.canvas.defsElement.node.appendChild(a.node),s.SVGShapeElement.images[e]=s.SVGShapeElement.imageCounter++,n.applyAttr("fill","url(#image"+s.SVGShapeElement.images[e]+")")}):s.SVGShapeElement.parentClass.prototype.applyAttr.apply(this,arguments)},s.SVGShapeElement.imageCounter=1,s.SVGShapeElement.images={},s.SVGPathElement=function(t,e){s.SVGPathElement.parentClass.call(this,"path",t,e),this.node.setAttribute("fill-rule","evenodd")},s.inherits(s.SVGPathElement,s.SVGShapeElement),s.SVGCircleElement=function(t,e){s.SVGCircleElement.parentClass.call(this,"circle",t,e)},s.inherits(s.SVGCircleElement,s.SVGShapeElement),s.SVGImageElement=function(t,e){s.SVGImageElement.parentClass.call(this,"image",t,e)},s.inherits(s.SVGImageElement,s.SVGShapeElement),s.SVGImageElement.prototype.applyAttr=function(t,e){var a,i=this;t=="image"?(typeof e=="object"?(a=e.url,this.offset=e.offset):(a=e,this.offset=[0,0]),s.whenImageLoaded(a).then(function(n){i.node.setAttributeNS("http://www.w3.org/1999/xlink","href",a),i.width=n[0].width,i.height=n[0].height,i.applyAttr("width",i.width),i.applyAttr("height",i.height),i.applyAttr("x",i.cx-i.width/2+i.offset[0]),i.applyAttr("y",i.cy-i.height/2+i.offset[1]),s.$(i.node).trigger("imageloaded",[n])})):t=="cx"?(this.cx=e,this.width&&this.applyAttr("x",e-this.width/2+this.offset[0])):t=="cy"?(this.cy=e,this.height&&this.applyAttr("y",e-this.height/2+this.offset[1])):s.SVGImageElement.parentClass.prototype.applyAttr.apply(this,arguments)},s.SVGTextElement=function(t,e){s.SVGTextElement.parentClass.call(this,"text",t,e)},s.inherits(s.SVGTextElement,s.SVGShapeElement),s.SVGTextElement.prototype.applyAttr=function(t,e){t==="text"?this.node.textContent=e:s.SVGTextElement.parentClass.prototype.applyAttr.apply(this,arguments)},s.VMLElement=function(t,e){s.VMLElement.VMLInitialized||s.VMLElement.initializeVML(),s.VMLElement.parentClass.apply(this,arguments)},s.inherits(s.VMLElement,s.AbstractElement),s.VMLElement.VMLInitialized=!1,s.VMLElement.initializeVML=function(){try{document.namespaces.rvml||document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),s.VMLElement.prototype.createElement=function(t){return document.createElement("<rvml:"+t+' class="rvml">')}}catch{s.VMLElement.prototype.createElement=function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"),s.VMLElement.VMLInitialized=!0},s.VMLElement.prototype.getElementCtr=function(t){return s["VML"+t]},s.VMLElement.prototype.addClass=function(t){s.$(this.node).addClass(t)},s.VMLElement.prototype.applyAttr=function(t,e){this.node[t]=e},s.VMLElement.prototype.getBBox=function(){var t=s.$(this.node);return{x:t.position().left/this.canvas.scale,y:t.position().top/this.canvas.scale,width:t.width()/this.canvas.scale,height:t.height()/this.canvas.scale}},s.VMLGroupElement=function(){s.VMLGroupElement.parentClass.call(this,"group"),this.node.style.left="0px",this.node.style.top="0px",this.node.coordorigin="0 0"},s.inherits(s.VMLGroupElement,s.VMLElement),s.VMLGroupElement.prototype.add=function(t){this.node.appendChild(t.node)},s.VMLCanvasElement=function(t,e,a){this.classPrefix="VML",s.VMLCanvasElement.parentClass.call(this,"group"),s.AbstractCanvasElement.apply(this,arguments),this.node.style.position="absolute"},s.inherits(s.VMLCanvasElement,s.VMLElement),s.mixin(s.VMLCanvasElement,s.AbstractCanvasElement),s.VMLCanvasElement.prototype.setSize=function(t,e){var a,i,n,r;if(this.width=t,this.height=e,this.node.style.width=t+"px",this.node.style.height=e+"px",this.node.coordsize=t+" "+e,this.node.coordorigin="0 0",this.rootElement){for(n=0,r=(a=this.rootElement.node.getElementsByTagName("shape")).length;n<r;n++)a[n].coordsize=t+" "+e,a[n].style.width=t+"px",a[n].style.height=e+"px";for(n=0,r=(i=this.node.getElementsByTagName("group")).length;n<r;n++)i[n].coordsize=t+" "+e,i[n].style.width=t+"px",i[n].style.height=e+"px"}},s.VMLCanvasElement.prototype.applyTransformParams=function(t,e,a){this.scale=t,this.transX=e,this.transY=a,this.rootElement.node.coordorigin=this.width-e-this.width/100+","+(this.height-a-this.height/100),this.rootElement.node.coordsize=this.width/t+","+this.height/t},s.VMLShapeElement=function(t,e){s.VMLShapeElement.parentClass.call(this,t,e),this.fillElement=new s.VMLElement("fill"),this.strokeElement=new s.VMLElement("stroke"),this.node.appendChild(this.fillElement.node),this.node.appendChild(this.strokeElement.node),this.node.stroked=!1,s.AbstractShapeElement.apply(this,arguments)},s.inherits(s.VMLShapeElement,s.VMLElement),s.mixin(s.VMLShapeElement,s.AbstractShapeElement),s.VMLShapeElement.prototype.applyAttr=function(t,e){switch(t){case"fill":this.node.fillcolor=e;break;case"fill-opacity":this.fillElement.node.opacity=Math.round(100*e)+"%";break;case"stroke":this.node.stroked=e!=="none",this.node.strokecolor=e;break;case"stroke-opacity":this.strokeElement.node.opacity=Math.round(100*e)+"%";break;case"stroke-width":parseInt(e,10)===0?this.node.stroked=!1:this.node.stroked=!0,this.node.strokeweight=e;break;case"d":this.node.path=s.VMLPathElement.pathSvgToVml(e);break;default:s.VMLShapeElement.parentClass.prototype.applyAttr.apply(this,arguments)}},s.VMLPathElement=function(t,e){var a=new s.VMLElement("skew");s.VMLPathElement.parentClass.call(this,"shape",t,e),this.node.coordorigin="0 0",a.node.on=!0,a.node.matrix="0.01,0,0,0.01,0,0",a.node.offset="0,0",this.node.appendChild(a.node)},s.inherits(s.VMLPathElement,s.VMLShapeElement),s.VMLPathElement.prototype.applyAttr=function(t,e){t==="d"?this.node.path=s.VMLPathElement.pathSvgToVml(e):s.VMLShapeElement.prototype.applyAttr.call(this,t,e)},s.VMLPathElement.pathSvgToVml=function(t){var e,a,i=0,n=0;return(t=t.replace(/(-?\d+)e(-?\d+)/g,"0")).replace(/([MmLlHhVvCcSs])\s*((?:-?\d*(?:\.\d+)?\s*,?\s*)+)/g,function(r,o,h,l){(h=h.replace(/(\d)-/g,"$1,-").replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g,",").split(","))[0]||h.shift();for(var m=0,d=h.length;m<d;m++)h[m]=Math.round(100*h[m]);switch(o){case"m":return i+=h[0],n+=h[1],"t"+h.join(",");case"M":return i=h[0],n=h[1],"m"+h.join(",");case"l":return i+=h[0],n+=h[1],"r"+h.join(",");case"L":return i=h[0],n=h[1],"l"+h.join(",");case"h":return i+=h[0],"r"+h[0]+",0";case"H":return"l"+(i=h[0])+","+n;case"v":return n+=h[0],"r0,"+h[0];case"V":return n=h[0],"l"+i+","+n;case"c":return e=i+h[h.length-4],a=n+h[h.length-3],i+=h[h.length-2],n+=h[h.length-1],"v"+h.join(",");case"C":return e=h[h.length-4],a=h[h.length-3],i=h[h.length-2],n=h[h.length-1],"c"+h.join(",");case"s":return h.unshift(n-a),h.unshift(i-e),e=i+h[h.length-4],a=n+h[h.length-3],i+=h[h.length-2],n+=h[h.length-1],"v"+h.join(",");case"S":return h.unshift(n+n-a),h.unshift(i+i-e),e=h[h.length-4],a=h[h.length-3],i=h[h.length-2],n=h[h.length-1],"c"+h.join(",")}return""}).replace(/z/g,"e")},s.VMLCircleElement=function(t,e){s.VMLCircleElement.parentClass.call(this,"oval",t,e)},s.inherits(s.VMLCircleElement,s.VMLShapeElement),s.VMLCircleElement.prototype.applyAttr=function(t,e){switch(t){case"r":this.node.style.width=2*e+"px",this.node.style.height=2*e+"px",this.applyAttr("cx",this.get("cx")||0),this.applyAttr("cy",this.get("cy")||0);break;case"cx":if(!e)return;this.node.style.left=e-(this.get("r")||0)+"px";break;case"cy":if(!e)return;this.node.style.top=e-(this.get("r")||0)+"px";break;default:s.VMLCircleElement.parentClass.prototype.applyAttr.call(this,t,e)}},s.VectorCanvas=function(t,e,a){return this.mode=window.SVGAngle?"svg":"vml",this.mode=="svg"?this.impl=new s.SVGCanvasElement(t,e,a):this.impl=new s.VMLCanvasElement(t,e,a),this.impl.mode=this.mode,this.impl},s.SimpleScale=function(t){this.scale=t},s.SimpleScale.prototype.getValue=function(t){return t},s.OrdinalScale=function(t){this.scale=t},s.OrdinalScale.prototype.getValue=function(t){return this.scale[t]},s.OrdinalScale.prototype.getTicks=function(){var t,e=[];for(t in this.scale)e.push({label:t,value:this.scale[t]});return e},s.NumericScale=function(t,e,a,i){this.scale=[],e=e||"linear",t&&this.setScale(t),e&&this.setNormalizeFunction(e),a!==void 0&&this.setMin(a),i!==void 0&&this.setMax(i)},s.NumericScale.prototype={setMin:function(t){this.clearMinValue=t,typeof this.normalize=="function"?this.minValue=this.normalize(t):this.minValue=t},setMax:function(t){this.clearMaxValue=t,typeof this.normalize=="function"?this.maxValue=this.normalize(t):this.maxValue=t},setScale:function(t){var e;for(this.scale=[],e=0;e<t.length;e++)this.scale[e]=[t[e]]},setNormalizeFunction:function(t){t==="polynomial"?this.normalize=function(e){return Math.pow(e,.2)}:t==="linear"?delete this.normalize:this.normalize=t,this.setMin(this.clearMinValue),this.setMax(this.clearMaxValue)},getValue:function(t){var e,a,i=[],n=0,r=0;for(typeof this.normalize=="function"&&(t=this.normalize(t)),r=0;r<this.scale.length-1;r++)e=this.vectorLength(this.vectorSubtract(this.scale[r+1],this.scale[r])),i.push(e),n+=e;for(a=(this.maxValue-this.minValue)/n,r=0;r<i.length;r++)i[r]*=a;for(r=0,t-=this.minValue;0<=t-i[r];)t-=i[r],r++;return t=r==this.scale.length-1?this.vectorToNum(this.scale[r]):this.vectorToNum(this.vectorAdd(this.scale[r],this.vectorMult(this.vectorSubtract(this.scale[r+1],this.scale[r]),t/i[r])))},vectorToNum:function(t){var e,a=0;for(e=0;e<t.length;e++)a+=Math.round(t[e])*Math.pow(256,t.length-e-1);return a},vectorSubtract:function(t,e){var a,i=[];for(a=0;a<t.length;a++)i[a]=t[a]-e[a];return i},vectorAdd:function(t,e){var a,i=[];for(a=0;a<t.length;a++)i[a]=t[a]+e[a];return i},vectorMult:function(t,e){var a,i=[];for(a=0;a<t.length;a++)i[a]=t[a]*e;return i},vectorLength:function(t){var e,a=0;for(e=0;e<t.length;e++)a+=t[e]*t[e];return Math.sqrt(a)},getTicks:function(){var t,e,a=[this.clearMinValue,this.clearMaxValue],i=a[1]-a[0],n=Math.pow(10,Math.floor(Math.log(i/5)/Math.LN10)),r=5/i*n,o=[];for(r<=.15?n*=10:r<=.35?n*=5:r<=.75&&(n*=2),a[0]=Math.floor(a[0]/n)*n,a[1]=Math.ceil(a[1]/n)*n,t=a[0];t<=a[1];)e=t==a[0]?this.clearMinValue:t==a[1]?this.clearMaxValue:t,o.push({label:t,value:this.getValue(e)}),t+=n;return o}},s.ColorScale=function(t,e,a,i){s.ColorScale.parentClass.apply(this,arguments)},s.inherits(s.ColorScale,s.NumericScale),s.ColorScale.prototype.setScale=function(t){var e;for(e=0;e<t.length;e++)this.scale[e]=s.ColorScale.rgbToArray(t[e])},s.ColorScale.prototype.getValue=function(t){return s.ColorScale.numToRgb(s.ColorScale.parentClass.prototype.getValue.call(this,t))},s.ColorScale.arrayToRgb=function(t){var e,a,i="#";for(a=0;a<t.length;a++)i+=(e=t[a].toString(16)).length==1?"0"+e:e;return i},s.ColorScale.numToRgb=function(t){for(t=t.toString(16);t.length<6;)t="0"+t;return"#"+t},s.ColorScale.rgbToArray=function(t){return t=t.substr(1),[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)]},s.Legend=function(t){this.params=t||{},this.map=this.params.map,this.series=this.params.series,this.body=s.$("<div/>"),this.body.addClass("jvectormap-legend"),this.params.cssClass&&this.body.addClass(this.params.cssClass),t.vertical?this.map.legendCntVertical.append(this.body):this.map.legendCntHorizontal.append(this.body),this.render()},s.Legend.prototype.render=function(){var t,e,a,i,n=this.series.scale.getTicks(),r=s.$("<div/>").addClass("jvectormap-legend-inner");for(this.body.html(""),this.params.title&&this.body.append(s.$("<div/>").addClass("jvectormap-legend-title").html(this.params.title)),this.body.append(r),t=0;t<n.length;t++){switch(e=s.$("<div/>").addClass("jvectormap-legend-tick"),a=s.$("<div/>").addClass("jvectormap-legend-tick-sample"),this.series.params.attribute){case"fill":s.isImageUrl(n[t].value)?a.css("background","url("+n[t].value+")"):a.css("background",n[t].value);break;case"stroke":a.css("background",n[t].value);break;case"image":a.css("background","url("+(typeof n[t].value=="object"?n[t].value.url:n[t].value)+") no-repeat center center");break;case"r":s.$("<div/>").css({"border-radius":n[t].value,border:this.map.params.markerStyle.initial["stroke-width"]+"px "+this.map.params.markerStyle.initial.stroke+" solid",width:2*n[t].value+"px",height:2*n[t].value+"px",background:this.map.params.markerStyle.initial.fill}).appendTo(a)}e.append(a),i=n[t].label,this.params.labelRender&&(i=this.params.labelRender(i)),e.append(s.$("<div>"+i+" </div>").addClass("jvectormap-legend-tick-text")),r.append(e)}r.append(s.$("<div/>").css("clear","both"))},s.DataSeries=function(t,e,a){var i;(t=t||{}).attribute=t.attribute||"fill",this.elements=e,this.params=t,this.map=a,t.attributes&&this.setAttributes(t.attributes),s.$.isArray(t.scale)?(i=t.attribute==="fill"||t.attribute==="stroke"?s.ColorScale:s.NumericScale,this.scale=new i(t.scale,t.normalizeFunction,t.min,t.max)):t.scale?this.scale=new s.OrdinalScale(t.scale):this.scale=new s.SimpleScale(t.scale),this.values=t.values||{},this.setValues(this.values),this.params.legend&&(this.legend=new s.Legend(s.$.extend({map:this.map,series:this},this.params.legend)))},s.DataSeries.prototype={setAttributes:function(t,e){var a,i=t;if(typeof t=="string")this.elements[t]&&this.elements[t].setStyle(this.params.attribute,e);else for(a in i)this.elements[a]&&this.elements[a].element.setStyle(this.params.attribute,i[a])},setValues:function(t){var e,a,i=-Number.MAX_VALUE,n=Number.MAX_VALUE,r={};if(this.scale instanceof s.OrdinalScale||this.scale instanceof s.SimpleScale)for(a in t)t[a]?r[a]=this.scale.getValue(t[a]):r[a]=this.elements[a].element.style.initial[this.params.attribute];else{if(this.params.min===void 0||this.params.max===void 0)for(a in t)i<(e=parseFloat(t[a]))&&(i=e),e<n&&(n=e);for(a in this.params.min===void 0?(this.scale.setMin(n),this.params.min=n):this.scale.setMin(this.params.min),this.params.max===void 0?(this.scale.setMax(i),this.params.max=i):this.scale.setMax(this.params.max),t)a!="indexOf"&&(e=parseFloat(t[a]),isNaN(e)?r[a]=this.elements[a].element.style.initial[this.params.attribute]:r[a]=this.scale.getValue(e))}this.setAttributes(r),s.$.extend(this.values,t)},clear:function(){var t,e={};for(t in this.values)this.elements[t]&&(e[t]=this.elements[t].element.shape.style.initial[this.params.attribute]);this.setAttributes(e),this.values={}},setScale:function(t){this.scale.setScale(t),this.values&&this.setValues(this.values)},setNormalizeFunction:function(t){this.scale.setNormalizeFunction(t),this.values&&this.setValues(this.values)}},s.Proj={degRad:180/Math.PI,radDeg:Math.PI/180,radius:6381372,sgn:function(t){return 0<t?1:t<0?-1:t},mill:function(t,e,a){return{x:this.radius*(e-a)*this.radDeg,y:-this.radius*Math.log(Math.tan((45+.4*t)*this.radDeg))/.8}},mill_inv:function(t,e,a){return{lat:(2.5*Math.atan(Math.exp(.8*e/this.radius))-5*Math.PI/8)*this.degRad,lng:(a*this.radDeg+t/this.radius)*this.degRad}},merc:function(t,e,a){return{x:this.radius*(e-a)*this.radDeg,y:-this.radius*Math.log(Math.tan(Math.PI/4+t*Math.PI/360))}},merc_inv:function(t,e,a){return{lat:(2*Math.atan(Math.exp(e/this.radius))-Math.PI/2)*this.degRad,lng:(a*this.radDeg+t/this.radius)*this.degRad}},aea:function(t,e,a){var i=a*this.radDeg,n=29.5*this.radDeg,r=45.5*this.radDeg,o=t*this.radDeg,h=e*this.radDeg,l=(Math.sin(n)+Math.sin(r))/2,m=Math.cos(n)*Math.cos(n)+2*l*Math.sin(n),d=l*(h-i),p=Math.sqrt(m-2*l*Math.sin(o))/l,y=Math.sqrt(m-2*l*Math.sin(0))/l;return{x:p*Math.sin(d)*this.radius,y:-(y-p*Math.cos(d))*this.radius}},aea_inv:function(t,e,a){var i=t/this.radius,n=e/this.radius,r=a*this.radDeg,o=29.5*this.radDeg,h=45.5*this.radDeg,l=(Math.sin(o)+Math.sin(h))/2,m=Math.cos(o)*Math.cos(o)+2*l*Math.sin(o),d=Math.sqrt(m-2*l*Math.sin(0))/l,p=Math.sqrt(i*i+(d-n)*(d-n)),y=Math.atan(i/(d-n));return{lat:Math.asin((m-p*p*l*l)/(2*l))*this.degRad,lng:(r+y/l)*this.degRad}},lcc:function(t,e,a){var i=a*this.radDeg,n=e*this.radDeg,r=33*this.radDeg,o=45*this.radDeg,h=t*this.radDeg,l=Math.log(Math.cos(r)*(1/Math.cos(o)))/Math.log(Math.tan(Math.PI/4+o/2)*(1/Math.tan(Math.PI/4+r/2))),m=Math.cos(r)*Math.pow(Math.tan(Math.PI/4+r/2),l)/l,d=m*Math.pow(1/Math.tan(Math.PI/4+h/2),l),p=m*Math.pow(1/Math.tan(Math.PI/4+0),l);return{x:d*Math.sin(l*(n-i))*this.radius,y:-(p-d*Math.cos(l*(n-i)))*this.radius}},lcc_inv:function(t,e,a){var i=t/this.radius,n=e/this.radius,r=a*this.radDeg,o=33*this.radDeg,h=45*this.radDeg,l=Math.log(Math.cos(o)*(1/Math.cos(h)))/Math.log(Math.tan(Math.PI/4+h/2)*(1/Math.tan(Math.PI/4+o/2))),m=Math.cos(o)*Math.pow(Math.tan(Math.PI/4+o/2),l)/l,d=m*Math.pow(1/Math.tan(Math.PI/4+0),l),p=this.sgn(l)*Math.sqrt(i*i+(d-n)*(d-n)),y=Math.atan(i/(d-n));return{lat:(2*Math.atan(Math.pow(m/p,1/l))-Math.PI/2)*this.degRad,lng:(r+y/l)*this.degRad}}},s.MapObject=function(t){},s.MapObject.prototype.getLabelText=function(t){return this.config.label?typeof this.config.label.render=="function"?this.config.label.render(t):t:null},s.MapObject.prototype.getLabelOffsets=function(t){var e;return this.config.label&&(typeof this.config.label.offsets=="function"?e=this.config.label.offsets(t):typeof this.config.label.offsets=="object"&&(e=this.config.label.offsets[t])),e||[0,0]},s.MapObject.prototype.setHovered=function(t){this.isHovered!==t&&(this.isHovered=t,this.shape.isHovered=t,this.shape.updateStyle(),this.label&&(this.label.isHovered=t,this.label.updateStyle()))},s.MapObject.prototype.setSelected=function(t){this.isSelected!==t&&(this.isSelected=t,this.shape.isSelected=t,this.shape.updateStyle(),this.label&&(this.label.isSelected=t,this.label.updateStyle()),s.$(this.shape).trigger("selected",[t]))},s.MapObject.prototype.setStyle=function(){this.shape.setStyle.apply(this.shape,arguments)},s.MapObject.prototype.remove=function(){this.shape.remove(),this.label&&this.label.remove()},s.Region=function(t){var e,a,i;this.config=t,this.map=this.config.map,this.shape=t.canvas.addPath({d:t.path,"data-code":t.code},t.style,t.canvas.rootElement),this.shape.addClass("jvectormap-region jvectormap-element"),e=this.shape.getBBox(),a=this.getLabelText(t.code),this.config.label&&a&&(i=this.getLabelOffsets(t.code),this.labelX=e.x+e.width/2+i[0],this.labelY=e.y+e.height/2+i[1],this.label=t.canvas.addText({text:a,"text-anchor":"middle","alignment-baseline":"central",x:this.labelX,y:this.labelY,"data-code":t.code},t.labelStyle,t.labelsGroup),this.label.addClass("jvectormap-region jvectormap-element"))},s.inherits(s.Region,s.MapObject),s.Region.prototype.updateLabelPosition=function(){this.label&&this.label.set({x:this.labelX*this.map.scale+this.map.transX*this.map.scale,y:this.labelY*this.map.scale+this.map.transY*this.map.scale})},s.Marker=function(t){var e;this.config=t,this.map=this.config.map,this.isImage=!!this.config.style.initial.image,this.createShape(),e=this.getLabelText(t.index),this.config.label&&e&&(this.offsets=this.getLabelOffsets(t.index),this.labelX=t.cx/this.map.scale-this.map.transX,this.labelY=t.cy/this.map.scale-this.map.transY,this.label=t.canvas.addText({text:e,"data-index":t.index,dy:"0.6ex",x:this.labelX,y:this.labelY},t.labelStyle,t.labelsGroup),this.label.addClass("jvectormap-marker jvectormap-element"))},s.inherits(s.Marker,s.MapObject),s.Marker.prototype.createShape=function(){var t=this;this.shape&&this.shape.remove(),this.shape=this.config.canvas[this.isImage?"addImage":"addCircle"]({"data-index":this.config.index,cx:this.config.cx,cy:this.config.cy},this.config.style,this.config.group),this.shape.addClass("jvectormap-marker jvectormap-element"),this.isImage&&s.$(this.shape.node).on("imageloaded",function(){t.updateLabelPosition()})},s.Marker.prototype.updateLabelPosition=function(){this.label&&this.label.set({x:this.labelX*this.map.scale+this.offsets[0]+this.map.transX*this.map.scale+5+(this.isImage?(this.shape.width||0)/2:this.shape.properties.r),y:this.labelY*this.map.scale+this.map.transY*this.map.scale+this.offsets[1]})},s.Marker.prototype.setStyle=function(t,e){var a;s.Marker.parentClass.prototype.setStyle.apply(this,arguments),t==="r"&&this.updateLabelPosition(),(a=!!this.shape.get("image"))!=this.isImage&&(this.isImage=a,this.config.style=s.$.extend(!0,{},this.shape.style),this.createShape())},s.Map=function(t){var e,a=this;if(this.params=s.$.extend(!0,{},s.Map.defaultParams,t),!s.Map.maps[this.params.map])throw new Error("Attempt to use map which was not loaded: "+this.params.map);for(e in this.mapData=s.Map.maps[this.params.map],this.markers={},this.regions={},this.regionsColors={},this.regionsData={},this.container=s.$("<div>").addClass("jvectormap-container"),this.params.container&&this.params.container.append(this.container),this.container.data("mapObject",this),this.defaultWidth=this.mapData.width,this.defaultHeight=this.mapData.height,this.setBackgroundColor(this.params.backgroundColor),this.onResize=function(){a.updateSize()},s.$(window).resize(this.onResize),s.Map.apiEvents)this.params[e]&&this.container.bind(s.Map.apiEvents[e]+".jvectormap",this.params[e]);this.canvas=new s.VectorCanvas(this.container[0],this.width,this.height),this.params.bindTouchEvents&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?this.bindContainerTouchEvents():window.MSGesture&&this.bindContainerPointerEvents()),this.bindContainerEvents(),this.bindElementEvents(),this.createTip(),this.params.zoomButtons&&this.bindZoomButtons(),this.createRegions(),this.createMarkers(this.params.markers||{}),this.updateSize(),this.params.focusOn&&(typeof this.params.focusOn=="string"?this.params.focusOn={region:this.params.focusOn}:s.$.isArray(this.params.focusOn)&&(this.params.focusOn={regions:this.params.focusOn}),this.setFocus(this.params.focusOn)),this.params.selectedRegions&&this.setSelectedRegions(this.params.selectedRegions),this.params.selectedMarkers&&this.setSelectedMarkers(this.params.selectedMarkers),this.legendCntHorizontal=s.$("<div/>").addClass("jvectormap-legend-cnt jvectormap-legend-cnt-h"),this.legendCntVertical=s.$("<div/>").addClass("jvectormap-legend-cnt jvectormap-legend-cnt-v"),this.container.append(this.legendCntHorizontal),this.container.append(this.legendCntVertical),this.params.series&&this.createSeries()},s.Map.prototype={transX:0,transY:0,scale:1,baseTransX:0,baseTransY:0,baseScale:1,width:0,height:0,setBackgroundColor:function(t){this.container.css("background-color",t)},resize:function(){var t=this.baseScale;this.width/this.height>this.defaultWidth/this.defaultHeight?(this.baseScale=this.height/this.defaultHeight,this.baseTransX=Math.abs(this.width-this.defaultWidth*this.baseScale)/(2*this.baseScale)):(this.baseScale=this.width/this.defaultWidth,this.baseTransY=Math.abs(this.height-this.defaultHeight*this.baseScale)/(2*this.baseScale)),this.scale*=this.baseScale/t,this.transX*=this.baseScale/t,this.transY*=this.baseScale/t},updateSize:function(){this.width=this.container.width(),this.height=this.container.height(),this.resize(),this.canvas.setSize(this.width,this.height),this.applyTransform()},reset:function(){var t,e;for(t in this.series)for(e=0;e<this.series[t].length;e++)this.series[t][e].clear();this.scale=this.baseScale,this.transX=this.baseTransX,this.transY=this.baseTransY,this.applyTransform()},applyTransform:function(){var t,e,a,i;a=this.defaultWidth*this.scale<=this.width?(t=(this.width-this.defaultWidth*this.scale)/(2*this.scale),(this.width-this.defaultWidth*this.scale)/(2*this.scale)):(t=0,(this.width-this.defaultWidth*this.scale)/this.scale),i=this.defaultHeight*this.scale<=this.height?(e=(this.height-this.defaultHeight*this.scale)/(2*this.scale),(this.height-this.defaultHeight*this.scale)/(2*this.scale)):(e=0,(this.height-this.defaultHeight*this.scale)/this.scale),this.transY>e?this.transY=e:this.transY<i&&(this.transY=i),this.transX>t?this.transX=t:this.transX<a&&(this.transX=a),this.canvas.applyTransformParams(this.scale,this.transX,this.transY),this.markers&&this.repositionMarkers(),this.repositionLabels(),this.container.trigger("viewportChange",[this.scale/this.baseScale,this.transX,this.transY])},bindContainerEvents:function(){var t,e,a=!1,i=this;this.params.panOnDrag&&(this.container.mousemove(function(n){return a&&(i.transX-=(t-n.pageX)/i.scale,i.transY-=(e-n.pageY)/i.scale,i.applyTransform(),t=n.pageX,e=n.pageY),!1}).mousedown(function(n){return a=!0,t=n.pageX,e=n.pageY,!1}),this.onContainerMouseUp=function(){a=!1},s.$("body").mouseup(this.onContainerMouseUp)),this.params.zoomOnScroll&&this.container.mousewheel(function(n,r,o,h){var l=s.$(i.container).offset(),m=n.pageX-l.left,d=n.pageY-l.top,p=Math.pow(1+i.params.zoomOnScrollSpeed/1e3,n.deltaFactor*n.deltaY);i.tip.hide(),i.setScale(i.scale*p,m,d),n.preventDefault()})},bindContainerTouchEvents:function(){function t(m){var d,p,y,u,c=m.originalEvent.touches;m.type=="touchstart"&&(h=0),c.length==1?(h==1&&(y=l.transX,u=l.transY,l.transX-=(i-c[0].pageX)/l.scale,l.transY-=(n-c[0].pageY)/l.scale,l.applyTransform(),l.tip.hide(),y==l.transX&&u==l.transY||m.preventDefault()),i=c[0].pageX,n=c[0].pageY):c.length==2&&(h==2?(p=Math.sqrt(Math.pow(c[0].pageX-c[1].pageX,2)+Math.pow(c[0].pageY-c[1].pageY,2))/a,l.setScale(e*p,r,o),l.tip.hide(),m.preventDefault()):(d=s.$(l.container).offset(),r=c[0].pageX>c[1].pageX?c[1].pageX+(c[0].pageX-c[1].pageX)/2:c[0].pageX+(c[1].pageX-c[0].pageX)/2,o=c[0].pageY>c[1].pageY?c[1].pageY+(c[0].pageY-c[1].pageY)/2:c[0].pageY+(c[1].pageY-c[0].pageY)/2,r-=d.left,o-=d.top,e=l.scale,a=Math.sqrt(Math.pow(c[0].pageX-c[1].pageX,2)+Math.pow(c[0].pageY-c[1].pageY,2)))),h=c.length}var e,a,i,n,r,o,h,l=this;s.$(this.container).bind("touchstart",t),s.$(this.container).bind("touchmove",t)},bindContainerPointerEvents:function(){var t=this,e=new MSGesture,a=this.container[0];(e.target=a).addEventListener("MSGestureChange",function(i){var n,r;i.translationX==0&&i.translationY==0||(n=t.transX,r=t.transY,t.transX+=i.translationX/t.scale,t.transY+=i.translationY/t.scale,t.applyTransform(),t.tip.hide(),n==t.transX&&r==t.transY||i.preventDefault()),i.scale!=1&&(t.setScale(t.scale*i.scale,i.offsetX,i.offsetY),t.tip.hide(),i.preventDefault())},!1),a.addEventListener("pointerdown",function(i){e.addPointer(i.pointerId)},!1)},bindElementEvents:function(){var t,e,a,i=this;this.container.mousemove(function(n){2<Math.abs(t-n.pageX)+Math.abs(e-n.pageY)&&(a=!0)}),this.container.delegate("[class~='jvectormap-element']","mouseover mouseout",function(n){var r=(s.$(this).attr("class").baseVal||s.$(this).attr("class")).indexOf("jvectormap-region")===-1?"marker":"region",o=r=="region"?s.$(this).attr("data-code"):s.$(this).attr("data-index"),h=r=="region"?i.regions[o].element:i.markers[o].element,l=r=="region"?i.mapData.paths[o].name:i.markers[o].config.name||"",m=s.$.Event(r+"TipShow.jvectormap"),d=s.$.Event(r+"Over.jvectormap");n.type=="mouseover"?(i.container.trigger(d,[o]),d.isDefaultPrevented()||h.setHovered(!0),i.tip.text(l),i.container.trigger(m,[i.tip,o]),m.isDefaultPrevented()||(i.tip.show(),i.tipWidth=i.tip.width(),i.tipHeight=i.tip.height())):(h.setHovered(!1),i.tip.hide(),i.container.trigger(r+"Out.jvectormap",[o]))}),this.container.delegate("[class~='jvectormap-element']","mousedown",function(n){t=n.pageX,e=n.pageY,a=!1}),this.container.delegate("[class~='jvectormap-element']","mouseup",function(){var n=(s.$(this).attr("class").baseVal?s.$(this).attr("class").baseVal:s.$(this).attr("class")).indexOf("jvectormap-region")===-1?"marker":"region",r=n=="region"?s.$(this).attr("data-code"):s.$(this).attr("data-index"),o=s.$.Event(n+"Click.jvectormap"),h=n=="region"?i.regions[r].element:i.markers[r].element;a||(i.container.trigger(o,[r]),(n=="region"&&i.params.regionsSelectable||n=="marker"&&i.params.markersSelectable)&&(o.isDefaultPrevented()||(i.params[n+"sSelectableOne"]&&i.clearSelected(n+"s"),h.setSelected(!h.isSelected))))})},bindZoomButtons:function(){var t=this;s.$("<div/>").addClass("jvectormap-zoomin").text("+").appendTo(this.container),s.$("<div/>").addClass("jvectormap-zoomout").html("&#x2212;").appendTo(this.container),this.container.find(".jvectormap-zoomin").click(function(){t.setScale(t.scale*t.params.zoomStep,t.width/2,t.height/2,!1,t.params.zoomAnimate)}),this.container.find(".jvectormap-zoomout").click(function(){t.setScale(t.scale/t.params.zoomStep,t.width/2,t.height/2,!1,t.params.zoomAnimate)})},createTip:function(){var t=this;this.tip=s.$("<div/>").addClass("jvectormap-tip").appendTo(s.$("body")),this.container.mousemove(function(e){var a=e.pageX-15-t.tipWidth,i=e.pageY-15-t.tipHeight;a<5&&(a=e.pageX+15),i<5&&(i=e.pageY+15),t.tip.css({left:a,top:i})})},setScale:function(t,e,a,i,n){var r,o,h,l,m,d,p,y,u,c=s.$.Event("zoom.jvectormap"),v=this,g=0,f=Math.abs(Math.round(60*(t-this.scale)/Math.max(t,this.scale))),M=new s.$.Deferred;return t>this.params.zoomMax*this.baseScale?t=this.params.zoomMax*this.baseScale:t<this.params.zoomMin*this.baseScale&&(t=this.params.zoomMin*this.baseScale),e!==void 0&&a!==void 0&&(zoomStep=t/this.scale,u=i?(y=e+this.defaultWidth*(this.width/(this.defaultWidth*t))/2,a+this.defaultHeight*(this.height/(this.defaultHeight*t))/2):(y=this.transX-(zoomStep-1)/t*e,this.transY-(zoomStep-1)/t*a)),n&&0<f?(o=this.scale,h=(t-o)/f,l=this.transX*this.scale,d=this.transY*this.scale,m=(y*t-l)/f,p=(u*t-d)/f,r=setInterval(function(){g+=1,v.scale=o+h*g,v.transX=(l+m*g)/v.scale,v.transY=(d+p*g)/v.scale,v.applyTransform(),g==f&&(clearInterval(r),v.container.trigger(c,[t/v.baseScale]),M.resolve())},10)):(this.transX=y,this.transY=u,this.scale=t,this.applyTransform(),this.container.trigger(c,[t/this.baseScale]),M.resolve()),M},setFocus:function(t){var e,a,i,n,r;if((t=t||{}).region?i=[t.region]:t.regions&&(i=t.regions),i){for(n=0;n<i.length;n++)this.regions[i[n]]&&(a=this.regions[i[n]].element.shape.getBBox())&&(e=e===void 0?a:{x:Math.min(e.x,a.x),y:Math.min(e.y,a.y),width:Math.max(e.x+e.width,a.x+a.width)-Math.min(e.x,a.x),height:Math.max(e.y+e.height,a.y+a.height)-Math.min(e.y,a.y)});return this.setScale(Math.min(this.width/e.width,this.height/e.height),-(e.x+e.width/2),-(e.y+e.height/2),!0,t.animate)}return t.lat!==void 0&&t.lng!==void 0?(r=this.latLngToPoint(t.lat,t.lng),t.x=this.transX-r.x/this.scale,t.y=this.transY-r.y/this.scale):t.x&&t.y&&(t.x*=-this.defaultWidth,t.y*=-this.defaultHeight),this.setScale(t.scale*this.baseScale,t.x,t.y,!0,t.animate)},getSelected:function(t){var e,a=[];for(e in this[t])this[t][e].element.isSelected&&a.push(e);return a},getSelectedRegions:function(){return this.getSelected("regions")},getSelectedMarkers:function(){return this.getSelected("markers")},setSelected:function(t,e){var a;if(typeof e!="object"&&(e=[e]),s.$.isArray(e))for(a=0;a<e.length;a++)this[t][e[a]].element.setSelected(!0);else for(a in e)this[t][a].element.setSelected(!!e[a])},setSelectedRegions:function(t){this.setSelected("regions",t)},setSelectedMarkers:function(t){this.setSelected("markers",t)},clearSelected:function(t){var e,a={},i=this.getSelected(t);for(e=0;e<i.length;e++)a[i[e]]=!1;this.setSelected(t,a)},clearSelectedRegions:function(){this.clearSelected("regions")},clearSelectedMarkers:function(){this.clearSelected("markers")},getMapObject:function(){return this},getRegionName:function(t){return this.mapData.paths[t].name},createRegions:function(){var t,e,a=this;for(t in this.regionLabelsGroup=this.regionLabelsGroup||this.canvas.addGroup(),this.mapData.paths)e=new s.Region({map:this,path:this.mapData.paths[t].path,code:t,style:s.$.extend(!0,{},this.params.regionStyle),labelStyle:s.$.extend(!0,{},this.params.regionLabelStyle),canvas:this.canvas,labelsGroup:this.regionLabelsGroup,label:this.canvas.mode!="vml"?this.params.labels&&this.params.labels.regions:null}),s.$(e.shape).bind("selected",function(i,n){a.container.trigger("regionSelected.jvectormap",[s.$(this.node).attr("data-code"),n,a.getSelectedRegions()])}),this.regions[t]={element:e,config:this.mapData.paths[t]}},createMarkers:function(t){var e,a,i,n,r,o=this;if(this.markersGroup=this.markersGroup||this.canvas.addGroup(),this.markerLabelsGroup=this.markerLabelsGroup||this.canvas.addGroup(),s.$.isArray(t))for(r=t.slice(),t={},e=0;e<r.length;e++)t[e]=r[e];for(e in t)n=t[e]instanceof Array?{latLng:t[e]}:t[e],(i=this.getMarkerPosition(n))!==!1&&(a=new s.Marker({map:this,style:s.$.extend(!0,{},this.params.markerStyle,{initial:n.style||{}}),labelStyle:s.$.extend(!0,{},this.params.markerLabelStyle),index:e,cx:i.x,cy:i.y,group:this.markersGroup,canvas:this.canvas,labelsGroup:this.markerLabelsGroup,label:this.canvas.mode!="vml"?this.params.labels&&this.params.labels.markers:null}),s.$(a.shape).bind("selected",function(h,l){o.container.trigger("markerSelected.jvectormap",[s.$(this.node).attr("data-index"),l,o.getSelectedMarkers()])}),this.markers[e]&&this.removeMarkers([e]),this.markers[e]={element:a,config:n})},repositionMarkers:function(){var t,e;for(t in this.markers)(e=this.getMarkerPosition(this.markers[t].config))!==!1&&this.markers[t].element.setStyle({cx:e.x,cy:e.y})},repositionLabels:function(){var t;for(t in this.regions)this.regions[t].element.updateLabelPosition();for(t in this.markers)this.markers[t].element.updateLabelPosition()},getMarkerPosition:function(t){return s.Map.maps[this.params.map].projection?this.latLngToPoint.apply(this,t.latLng||[0,0]):{x:t.coords[0]*this.scale+this.transX*this.scale,y:t.coords[1]*this.scale+this.transY*this.scale}},addMarker:function(t,e,a){var i,n,r={},o=[];for(a=a||[],r[t]=e,n=0;n<a.length;n++)i={},a[n]!==void 0&&(i[t]=a[n]),o.push(i);this.addMarkers(r,o)},addMarkers:function(t,e){var a;for(e=e||[],this.createMarkers(t),a=0;a<e.length;a++)this.series.markers[a].setValues(e[a]||{})},removeMarkers:function(t){var e;for(e=0;e<t.length;e++)this.markers[t[e]].element.remove(),delete this.markers[t[e]]},removeAllMarkers:function(){var t,e=[];for(t in this.markers)e.push(t);this.removeMarkers(e)},latLngToPoint:function(t,e){var a,i,n,r=s.Map.maps[this.params.map].projection,o=r.centralMeridian;return e<-180+o&&(e+=360),a=s.Proj[r.type](t,e,o),!!(i=this.getInsetForPoint(a.x,a.y))&&(n=i.bbox,a.x=(a.x-n[0].x)/(n[1].x-n[0].x)*i.width*this.scale,a.y=(a.y-n[0].y)/(n[1].y-n[0].y)*i.height*this.scale,{x:a.x+this.transX*this.scale+i.left*this.scale,y:a.y+this.transY*this.scale+i.top*this.scale})},pointToLatLng:function(t,e){var a,i,n,r,o,h=s.Map.maps[this.params.map].projection,l=h.centralMeridian,m=s.Map.maps[this.params.map].insets;for(a=0;a<m.length;a++)if(n=(i=m[a]).bbox,r=t-(this.transX*this.scale+i.left*this.scale),o=e-(this.transY*this.scale+i.top*this.scale),r=r/(i.width*this.scale)*(n[1].x-n[0].x)+n[0].x,o=o/(i.height*this.scale)*(n[1].y-n[0].y)+n[0].y,r>n[0].x&&r<n[1].x&&o>n[0].y&&o<n[1].y)return s.Proj[h.type+"_inv"](r,-o,l);return!1},getInsetForPoint:function(t,e){var a,i,n=s.Map.maps[this.params.map].insets;for(a=0;a<n.length;a++)if(t>(i=n[a].bbox)[0].x&&t<i[1].x&&e>i[0].y&&e<i[1].y)return n[a]},createSeries:function(){var t,e;for(e in this.series={markers:[],regions:[]},this.params.series)for(t=0;t<this.params.series[e].length;t++)this.series[e][t]=new s.DataSeries(this.params.series[e][t],this[e],this)},remove:function(){this.tip.remove(),this.container.remove(),s.$(window).unbind("resize",this.onResize),s.$("body").unbind("mouseup",this.onContainerMouseUp)}},s.Map.maps={},s.Map.defaultParams={map:"world_mill_en",backgroundColor:"#505050",zoomButtons:!0,zoomOnScroll:!0,zoomOnScrollSpeed:3,panOnDrag:!0,zoomMax:8,zoomMin:1,zoomStep:1.6,zoomAnimate:!0,regionsSelectable:!1,markersSelectable:!1,bindTouchEvents:!0,regionStyle:{initial:{fill:"white","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":1},hover:{"fill-opacity":.8,cursor:"pointer"},selected:{fill:"yellow"},selectedHover:{}},regionLabelStyle:{initial:{"font-family":"Verdana","font-size":"12","font-weight":"bold",cursor:"default",fill:"black"},hover:{cursor:"pointer"}},markerStyle:{initial:{fill:"grey",stroke:"#505050","fill-opacity":1,"stroke-width":1,"stroke-opacity":1,r:5},hover:{stroke:"black","stroke-width":2,cursor:"pointer"},selected:{fill:"blue"},selectedHover:{}},markerLabelStyle:{initial:{"font-family":"Verdana","font-size":"12","font-weight":"bold",cursor:"default",fill:"black"},hover:{cursor:"pointer"}}},s.Map.apiEvents={onRegionTipShow:"regionTipShow",onRegionOver:"regionOver",onRegionOut:"regionOut",onRegionClick:"regionClick",onRegionSelected:"regionSelected",onMarkerTipShow:"markerTipShow",onMarkerOver:"markerOver",onMarkerOut:"markerOut",onMarkerClick:"markerClick",onMarkerSelected:"markerSelected",onViewportChange:"viewportChange"},s.MultiMap=function(t){var e=this;this.maps={},this.params=s.$.extend(!0,{},s.MultiMap.defaultParams,t),this.params.maxLevel=this.params.maxLevel||Number.MAX_VALUE,this.params.main=this.params.main||{},this.params.main.multiMapLevel=0,this.history=[this.addMap(this.params.main.map,this.params.main)],this.defaultProjection=this.history[0].mapData.projection.type,this.mapsLoaded={},this.params.container.css({position:"relative"}),this.backButton=s.$("<div/>").addClass("jvectormap-goback").text("Back").appendTo(this.params.container),this.backButton.hide(),this.backButton.click(function(){e.goBack()}),this.spinner=s.$("<div/>").addClass("jvectormap-spinner").appendTo(this.params.container),this.spinner.hide()},s.MultiMap.prototype={addMap:function(t,e){var a=s.$("<div/>").css({width:"100%",height:"100%"});return this.params.container.append(a),this.maps[t]=new s.Map(s.$.extend(e,{container:a})),this.params.maxLevel>e.multiMapLevel&&this.maps[t].container.on("regionClick.jvectormap",{scope:this},function(i,n){var r=i.data.scope,o=r.params.mapNameByCode(n,r);r.drillDownPromise&&r.drillDownPromise.state()==="pending"||r.drillDown(o,n)}),this.maps[t]},downloadMap:function(t){var e=this,a=s.$.Deferred();return this.mapsLoaded[t]?a.resolve():s.$.get(this.params.mapUrlByCode(t,this)).then(function(){e.mapsLoaded[t]=!0,a.resolve()},function(){a.reject()}),a},drillDown:function(t,e){var a=this.history[this.history.length-1],i=this,n=a.setFocus({region:e,animate:!0}),r=this.downloadMap(e);n.then(function(){r.state()==="pending"&&i.spinner.show()}),r.always(function(){i.spinner.hide()}),this.drillDownPromise=s.$.when(r,n),this.drillDownPromise.then(function(){a.params.container.hide(),i.maps[t]?i.maps[t].params.container.show():i.addMap(t,{map:t,multiMapLevel:a.params.multiMapLevel+1}),i.history.push(i.maps[t]),i.backButton.show()})},goBack:function(){var t=this.history.pop(),e=this.history[this.history.length-1],a=this;t.setFocus({scale:1,x:.5,y:.5,animate:!0}).then(function(){t.params.container.hide(),e.params.container.show(),e.updateSize(),a.history.length===1&&a.backButton.hide(),e.setFocus({scale:1,x:.5,y:.5,animate:!0})})}},s.MultiMap.defaultParams={mapNameByCode:function(t,e){return t.toLowerCase()+"_"+e.defaultProjection+"_en"},mapUrlByCode:function(t,e){return"jquery-jvectormap-data-"+t.toLowerCase()+"-"+e.defaultProjection+"-en.js"}}});export default w();

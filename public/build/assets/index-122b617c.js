import{r as C,c as le,o as re,a as i,b as f,d as u,w as l,g as a,e as m,f as A,h as c,t as d,F as $,i as I,j as b,k as ce,n as P,l as ie,A as ue}from"./chunk-1f342eb4.js";import"./chunk-e47d8634.js";const de=["onSubmit"],pe={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},_e={for:"form-label"},ge={for:"form-label"},fe={class:"grid grid-cols-2 gap-3"},me={class:"btn btn-sm btn-primary w-full lg:mt-[22px]"},ve=a("i",{class:"fas fa-search"},null,-1),he=a("i",{class:"fas fa-trash"},null,-1),be={class:"p-3"},we={class:"grid grid-cols-2 mb-3 gap-3"},xe=a("i",{class:"fa-solid fa-check-circle"},null,-1),ke=a("i",{class:"fa-solid fa-star"},null,-1),ye=a("i",{class:"fa-solid fa-check-circle"},null,-1),Ce={class:"text-center grid grid-cols-2 gap-3"},$e=a("i",{class:"fas fa-credit-card me-2"},null,-1),Ie=["onClick"],Se=a("i",{class:"fas fa-shopping-cart me-2"},null,-1),Te={class:"text-center mt-3"},Pe={class:"list-none"},Be={class:"inline-block"},Me=a("i",{class:"fas fa-arrow-left"},null,-1),Ue=[Me],Ee=["onClick"],je={class:"inline-block"},Le=a("i",{class:"fas fa-arrow-right"},null,-1),Fe=[Le],Ne={__name:"Index",props:{groupId:{type:String,default:0}},setup(K){const O=K,w=C({price:"",search:""}),n=C({page:1,limit:16,total_rows:0,total_page:0,visible_pages:[]}),D=le(()=>{const{page:e,total_page:o,visible_pages:s}=n.value,_=5;let h=Math.max(e-Math.floor(_/2),1),k=Math.min(h+_-1,o);return k-h+1<_&&(h=Math.max(k-_+1,1)),Array.from({length:k-h+1},(E,y)=>h+y)}),Q=e=>{n.value.page!==e&&(n.value.page=e,g())},G=()=>{n.value.page<=1||(n.value.page--,g())},q=()=>{n.value.page>=n.value.total_page||(n.value.page++,g())},z=C([{label:"Tất cả",value:""},{label:"Dưới 100.000đ",value:"0-100000"},{label:"100.000đ - 200.000đ",value:"100000-200000"},{label:"200.000đ - 500.000đ",value:"200000-500000"},{label:"500.000đ - 1.000.000đ",value:"500000-1000000"},{label:"1.000.000đ - 2.000.000đ",value:"1000000-2000000"},{label:"2.000.000đ - 5.000.000đ",value:"2000000-5000000"},{label:"5.000.000đ - 10.000.000đ",value:"5000000-10000000"},{label:"Trên 10.000.000đ",value:"10000000-0"}]),x=C(!1),S=C([]),g=async()=>{var e,o;x.value=!0;try{const{data:s}=await axios.get("/api/stores/accounts",{params:{...w.value,group_id:O.groupId,...n.value}});v("page")!==null&&n.value.page!==parseInt(v("page"))&&U("product_id"),n.value.page!==1?M("page",n.value.page):U("page"),S.value=((e=s.data)==null?void 0:e.data)||[],n.value=((o=s.data)==null?void 0:o.meta)||[]}catch(s){Swal.fire("Oops...",$catchMessage(s),"error")}finally{const s=v("product_id");setTimeout(s?()=>{const _=document.getElementById("card_"+s);_&&_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}:ee,500),setTimeout(()=>{x.value=!1},600)}},H=()=>{n.value.page=1,g()},J=()=>{w.value={price:"",search:""},n.value.page=1,g()},W=(e,o="VND",s=2)=>$formatCurrency(e,o,s),X=async e=>{if((await Swal.fire({icon:"question",title:$__t("Bạn chắc chứ?"),text:`${$__t("Bạn sẽ mua nick")} #${e.code} ${$__t("với giá")} ${e.price_str}?`,showCancelButton:!0,confirmButtonText:$__t("Đồng ý"),cancelButtonText:$__t("Hủy")})).isConfirmed===!0){Swal.fire({icon:"info",title:$__t("Đang xử lý!"),html:$__t("Không được tắt trang này, vui lòng đợi trong giây lát!"),timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{}});try{const{data:s}=await axios.post("/api/stores/accounts/"+e.code+"/buy");Swal.fire("Great!",s.message,"success").then(()=>{window.open("/account/orders/accounts/"+e.code,"_self")})}catch(s){Swal.fire("Oops...",$catchMessage(s),"error")}}},Y=e=>{M("product_id",e.code),window.open("/tai-khoan/thong-tin/"+e.code,"_self")},T=()=>{const e=["#C70039","#2E4374","#219C90","#EE9322","#5B0888","#004225","#9400FF"];return e[Math.floor(Math.random()*e.length)]},Z=e=>typeof e=="string"||e instanceof String,ee=()=>{window.scrollTo({top:0,behavior:"smooth"})},M=(e,o)=>{if(parseInt(v(e))===parseInt(o))return;const s=new URL(window.location.href);s.searchParams.set(e,o),window.history.pushState({},"",s)},U=e=>{if(v(e)===null)return;const o=new URL(window.location.href);o.searchParams.delete(e),window.history.pushState({},"",o)},v=e=>new URL(window.location.href).searchParams.get(e),te=e=>new URL(window.location.href).searchParams.get("product_id")===e;window.addEventListener("popstate",()=>{const e=v("page");e&&n.value.page!==parseInt(e)?(n.value.page=parseInt(e),g()):!e&&n.value.page!==1&&(n.value.page=1,g())});const p=e=>$__t(e);return re(()=>{const e=v("page");e&&(n.value.page=parseInt(e)),g()}),(e,o)=>{var V;const s=i("a-select-option"),_=i("a-select"),h=i("a-input"),k=i("a-spin"),E=i("a-image"),y=i("a-tag"),ae=i("a-button"),j=i("a-tooltip"),L=i("a-badge-ribbon"),F=i("a-col"),N=i("a-row"),oe=i("a-skeleton"),R=i("a-card"),ne=i("a-empty");return c(),f("section",null,[u(k,{spinning:x.value},{default:l(()=>[a("form",{class:"mb-5 mt-5",onSubmit:ce(H,["prevent"])},[a("div",pe,[a("div",null,[a("label",_e,d(p("Chọn mức giá"))+": ",1),u(_,{value:w.value.price,"onUpdate:value":o[0]||(o[0]=t=>w.value.price=t),placeholder:p("Chọn mức giá"),style:{width:"100%"}},{default:l(()=>[(c(!0),f($,null,I(z.value,t=>(c(),m(s,{key:t.value,value:t.value},{default:l(()=>[b(d(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),a("div",null,[a("label",ge,d(p("Tìm kiếm"))+": ",1),u(h,{value:w.value.search,"onUpdate:value":o[1]||(o[1]=t=>w.value.search=t),placeholder:p("Tìm kiếm mã sản phẩm, trang phục,..."),style:{width:"100%"}},null,8,["value","placeholder"])]),a("div",fe,[a("div",null,[a("button",me,[ve,b(" "+d(p("Tìm kiếm")),1)])]),a("div",null,[a("button",{class:"btn btn-sm btn-danger w-full lg:mt-[22px]",type:"button",onClick:o[2]||(o[2]=t=>J())},[he,b(" "+d(p("Đặt lại")),1)])])])])],40,de)]),_:1},8,["spinning"]),a("div",null,[x.value?(c(),m(N,{key:1,gutter:18},{default:l(()=>[(c(),f($,null,I(16,t=>u(F,{xs:12,sm:8,lg:6,key:t},{default:l(()=>[u(R,{class:"mb-3 h-[303px]"},{default:l(()=>[u(oe,{active:""})]),_:1})]),_:2},1024)),64))]),_:1})):(c(),m(N,{key:0,gutter:18},{default:l(()=>[(c(!0),f($,null,I(S.value,t=>(c(),m(F,{xs:24,md:8,lg:6,key:t.id,class:"mb-2 mt-2 cursor-pointer",id:`card_${t.code}`},{default:l(()=>[u(L,{color:"red",text:`-${t.discount}%`,class:P({hidden:t.discount<=0}),placement:"start"},{default:l(()=>[u(L,{color:"pink",text:`MS: ${t.code}`,placement:"end"},{default:l(()=>[a("div",{style:{background:"transparent"},class:P(["border border-primary rounded-lg p-[1px]",{"card-active":te(t.code)}])},[u(E,{src:t.image,alt:t.name,width:"100%",height:"sm:200px lg:170px",class:"rounded-t-lg"},null,8,["src","alt"]),a("div",be,[a("div",we,[(c(!0),f($,null,I(t.highlights,(r,se)=>(c(),f("div",{key:se,class:"lg:col-span-1"},[Z(r)?(c(),m(y,{key:0,color:T(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:l(()=>[xe,b(" "+d(r),1)]),_:2},1032,["color"])):(r==null?void 0:r.name)!==void 0&&(r==null?void 0:r.value)!=="undefined"?(c(),m(y,{key:1,color:T(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:l(()=>[ke,b(" "+d(r.name)+": "+d(r.value),1)]),_:2},1032,["color"])):(r==null?void 0:r[0])!==void 0?(c(),m(y,{key:2,color:T(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:l(()=>[ye,b(" "+d(r[0]),1)]),_:2},1032,["color"])):A("",!0)]))),128))]),a("div",Ce,[u(j,{title:t.discount!==0?`${p("Giá gốc")} ${W(t.price)}`:""},{default:l(()=>[u(ae,{type:"dashed",block:"",onClick:r=>X(t),class:"dark:text-white"},{default:l(()=>[$e,b(" "+d(t.price_str),1)]),_:2},1032,["onClick"])]),_:2},1032,["title"]),u(j,{title:t.name},{default:l(()=>[a("button",{class:"btn btn-sm btn-primary w-full",onClick:r=>Y(t)},[Se,a("span",null,d(p("Chi tiết")),1)],8,Ie)]),_:2},1032,["title"])])])],2)]),_:2},1032,["text"])]),_:2},1032,["text","class"])]),_:2},1032,["id"]))),128))]),_:1}))]),((V=S.value)==null?void 0:V.length)===0&&!x.value?(c(),m(R,{key:0},{default:l(()=>[u(ne,{description:p("Không tìm thấy tài khoản nào trong nhóm này")},null,8,["description"])]),_:1})):A("",!0),a("div",Te,[u(k,{spinning:x.value},{default:l(()=>[a("ul",Pe,[a("li",Be,[a("a",{href:"javascript:void(0)",onClick:o[3]||(o[3]=t=>G()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px] pl-2"},Ue)]),(c(!0),f($,null,I(D.value,t=>(c(),f("li",{key:t,class:"inline-block"},[a("a",{href:"javascript:void(0)",onClick:r=>Q(t),class:P(["flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300",{"p-active":n.value.page===t}])},d(t!==-1?t:"..."),11,Ee)]))),128)),a("li",je,[a("a",{href:"javascript:void(0)",onClick:o[4]||(o[4]=t=>q()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px]"},Fe)])])]),_:1},8,["spinning"])])])}}},B=ie({});B.use(ue);B.component("account-index",Ne);B.mount("#app");

import{r as w,c as ve,o as me,a as u,b as h,d as e,w as a,e as $,f as fe,g as o,h as d,t as s,F as S,i as K,j as c,k as he,n as q,l as ge,A as be}from"./chunk-1f342eb4.js";import"./chunk-e47d8634.js";const ke=["onSubmit"],ye={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},xe={for:"form-label"},we={for:"form-label"},Ce={class:"grid grid-cols-2 gap-3"},Te={class:"btn btn-sm btn-primary w-full lg:mt-[22px]"},$e=o("i",{class:"fas fa-search"},null,-1),Me=o("i",{class:"fas fa-trash"},null,-1),Be={style:{background:"transparent"},class:"border border-primary rounded-lg p-[1px]"},Ne={class:"p-3"},Se={class:"text-center mb-3"},Ke={class:"font-semibold text-lg"},Ue={class:"text-center space-y-3 lg:flex lg:justify-between lg:gap-3 lg:space-y-0"},Ge=o("i",{class:"fas fa-credit-card me-2"},null,-1),Ie=["onClick"],Oe=o("i",{class:"fas fa-shopping-cart me-2"},null,-1),Pe={class:"hidden lg:inline-block"},Ve={class:"text-center mt-3"},je={class:"list-none"},Re={class:"inline-block"},De=["onClick"],Fe={class:"inline-block"},Ae=o("hr",{class:"mb-3"},null,-1),He={key:0},Le=["innerHTML"],Ee={class:"space-y-3"},qe={key:0},ze={class:"text-danger-600"},Je={key:1},Qe={key:1},We={class:"space-y-3 mb-3"},Xe={key:0},Ye={class:"text-danger-600"},Ze={key:1},et={__name:"Index",props:{groupId:{type:String,default:0}},setup(z){const J=z,M=w({price:"",search:""}),g=w({page:1,limit:12,total_rows:0,total_page:0,visible_pages:[]}),Q=ve(()=>{const{page:i,total_page:t,visible_pages:p}=g.value,b=5;let _=Math.max(i-Math.floor(b/2),1),C=Math.min(_+b-1,t);return C-_+1<b&&(_=Math.max(C-b+1,1)),Array.from({length:C-_+1},(R,I)=>_+I)}),W=i=>{g.value.page!==i&&(g.value.page=i,B())},X=()=>{g.value.page<=1||(g.value.page--,B())},Y=()=>{g.value.page>=g.value.total_page||(g.value.page++,B())},Z=w([{label:"Tất cả",value:""},{label:"Dưới 100.000đ",value:"0-100000"},{label:"100.000đ - 200.000đ",value:"100000-200000"},{label:"200.000đ - 500.000đ",value:"200000-500000"},{label:"500.000đ - 1.000.000đ",value:"500000-1000000"},{label:"Trên 1.000.000đ",value:"1000000-0"}]),x=w(!1),G=w([]),B=async()=>{var i,t;x.value=!0;try{const{data:p}=await axios.get("/api/stores/items",{params:{...M.value,group_id:J.groupId,...g.value}});G.value=((i=p.data)==null?void 0:i.data)||[],g.value=((t=p.data)==null?void 0:t.meta)||[]}catch(p){Swal.fire("Oops...",$catchMessage(p),"error")}finally{x.value=!1,ie()}},ee=()=>{g.value.page=1,B()},te=()=>{M.value={price:"",search:""},g.value.page=1,B()},ae=(i,t="VND",p=2)=>$formatCurrency(i,t,p),U=w(!1),m=w(null),r=w({Mat_Khau:"",Tai_Khoan:"",isConfirm:!1,Dang_Nhap_Bang:"Riot"}),ne=async i=>{(m.value=i)&&(U.value=!0)},le=()=>{U.value=!1},oe=()=>{U.value=!1},se=async(i,t)=>{if((i==null?void 0:i.code)===void 0)return;if(i.type==="addfriend"&&t.Ten_In_Game==="")return Swal.fire("Oops...",$__t("Vui lòng nhập tên tài khoản nhận"),"error");if(i.type==="user_pass"&&t.Tai_Khoan==="")return Swal.fire("Oops...",$__t("Vui lòng nhập tài khoản"),"error");if(i.type==="user_pass"&&t.Mat_Khau==="")return Swal.fire("Oops...",$__t("Vui lòng nhập mật khẩu"),"error");if((await Swal.fire({icon:"question",title:$__t("Bạn chắc chứ?"),text:`${$__t("Bạn sẽ mua")} #${item.code} ${$__t("với giá")} ${item.price_str}?`,showCancelButton:!0,confirmButtonText:$__t("Đồng ý"),cancelButtonText:$__t("Hủy")})).isConfirmed===!0){Swal.fire({icon:"info",title:$__t("Đang xử lý!"),html:$__t("Không được tắt trang này, vui lòng đợi trong giây lát!"),timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{}});try{const{data:b}=await axios.post("/api/stores/items/"+i.code+"/buy",t);Swal.fire("Great!",b.message,"success").then(()=>{window.open("/account/orders/items/"+b.data.code,"_self")})}catch(b){Swal.fire("Oops...",$catchMessage(b),"error")}}},ie=()=>{window.scrollTo({top:0,behavior:"smooth"})},n=i=>$__t(i);return me(()=>{B()}),(i,t)=>{var H,L,E;const p=u("a-select-option"),b=u("a-select"),_=u("a-input"),C=u("a-spin"),R=u("a-skeleton"),I=u("a-card"),N=u("a-col"),O=u("a-row"),re=u("a-image"),V=u("a-button"),de=u("a-tooltip"),D=u("a-badge-ribbon"),ue=u("a-empty"),F=u("iconify-icon"),ce=u("a-tag"),P=u("a-checkbox"),A=u("a-form"),_e=u("a-badge"),pe=u("a-modal");return d(),h("section",null,[e(C,{spinning:x.value},{default:a(()=>[o("form",{class:"mb-5 mt-5",onSubmit:he(ee,["prevent"])},[o("div",ye,[o("div",null,[o("label",xe,s(n("Chọn mức giá"))+": ",1),e(b,{value:M.value.price,"onUpdate:value":t[0]||(t[0]=l=>M.value.price=l),placeholder:n("Chọn mức giá"),style:{width:"100%"}},{default:a(()=>[(d(!0),h(S,null,K(Z.value,l=>(d(),$(p,{key:l.value,value:l.value},{default:a(()=>[c(s(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),o("div",null,[o("label",we,s(n("Tìm kiếm"))+": ",1),e(_,{value:M.value.search,"onUpdate:value":t[1]||(t[1]=l=>M.value.search=l),placeholder:n("Tìm kiếm"),style:{width:"100%"}},null,8,["value","placeholder"])]),o("div",Ce,[o("div",null,[o("button",Te,[$e,c(" "+s(n("Tìm kiếm")),1)])]),o("div",null,[o("button",{class:"btn btn-sm btn-danger w-full lg:mt-[22px]",type:"button",onClick:t[2]||(t[2]=l=>te())},[Me,c(" "+s(n("Đặt lại")),1)])])])])],40,ke)]),_:1},8,["spinning"]),x.value&&((H=G.value)==null?void 0:H.length)===0?(d(),$(O,{key:0,gutter:18},{default:a(()=>[(d(),h(S,null,K(4,l=>e(N,{xs:12,sm:8,lg:6,key:l},{default:a(()=>[e(I,{class:"mb-3"},{default:a(()=>[e(R,{active:""})]),_:1})]),_:2},1024)),64))]),_:1})):(d(),$(C,{key:1,spinning:x.value},{default:a(()=>[e(O,{gutter:18},{default:a(()=>[(d(!0),h(S,null,K(G.value,l=>(d(),$(N,{xs:12,md:6,key:l.id,class:"mb-2 mt-2 cursor-pointer"},{default:a(()=>[e(D,{color:"red",text:`${l.discount}%`,class:q({hidden:l.discount<=0}),placement:"start"},{default:a(()=>[e(D,{color:"pink",text:`MS: ${l.code}`,placement:"end"},{default:a(()=>[o("div",Be,[e(re,{src:l.image,alt:"",style:{width:"300px","max-height":"400px"},class:"rounded-t-lg"},null,8,["src"]),o("div",Ne,[o("div",Se,[o("span",Ke,s(n("Đã bán"))+": "+s(l.sold_count),1)]),o("div",Ue,[e(de,{title:l.discount!==0?`${n("Giá gốc")} ${ae(l.price)}`:""},{default:a(()=>[e(V,{type:"dashed",block:"",class:"dark:text-white"},{default:a(()=>[Ge,c(" "+s(l.price_str),1)]),_:2},1024)]),_:2},1032,["title"]),o("button",{class:"btn btn-sm btn-primary w-full",onClick:f=>ne(l)},[Oe,o("span",Pe,s(n("Mua Ngay")),1)],8,Ie)])])])]),_:2},1032,["text"])]),_:2},1032,["text","class"])]),_:2},1024))),128))]),_:1})]),_:1},8,["spinning"])),((L=G.value)==null?void 0:L.length)===0&&!x.value?(d(),$(I,{key:2},{default:a(()=>[e(ue,{description:n("Không tìm thấy vật phẩm nào trong nhóm này")},null,8,["description"])]),_:1})):fe("",!0),o("div",Ve,[e(C,{spinning:x.value},{default:a(()=>[o("ul",je,[o("li",Re,[o("a",{href:"javascript:void(0)",onClick:t[3]||(t[3]=l=>X()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px] pl-2"},[e(F,{icon:"material-symbols:arrow-back-ios-rounded"})])]),(d(!0),h(S,null,K(Q.value,l=>(d(),h("li",{key:l,class:"inline-block"},[o("a",{href:"javascript:void(0)",onClick:f=>W(l),class:q(["flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300",{"p-active":g.value.page===l}])},s(l!==-1?l:"..."),11,De)]))),128)),o("li",Fe,[o("a",{href:"javascript:void(0)",onClick:t[4]||(t[4]=l=>Y()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px]"},[e(F,{icon:"material-symbols:arrow-forward-ios-rounded"})])])])]),_:1},8,["spinning"])]),e(pe,{open:U.value,"onUpdate:open":t[15]||(t[15]=l=>U.value=l),width:820,title:`${n("Mua Vật Phẩm")}: ${(E=m.value)==null?void 0:E.name}`,onOk:oe},{footer:a(()=>{var l;return[e(V,{key:"back",onClick:le},{default:a(()=>[c(s(n("Huỷ")),1)]),_:1}),e(V,{key:"submit",type:"primary",loading:x.value,disabled:((l=r.value)==null?void 0:l.isConfirm)!==!0,onClick:t[5]||(t[5]=f=>se(m.value,r.value))},{default:a(()=>[c(s(n("Thanh Toán")),1)]),_:1},8,["loading","disabled"])]}),default:a(()=>{var l;return[Ae,((l=m.value)==null?void 0:l.type)==="addfriend"?(d(),h("div",He,[e(O,{gutter:12,class:"space-y-3"},{default:a(()=>[e(N,{xs:24,md:12},{default:a(()=>{var f,v;return[o("div",{class:"mb-3",innerHTML:(f=m.value)==null?void 0:f.description},null,8,Le),o("div",Ee,[(d(!0),h(S,null,K((v=m.value)==null?void 0:v.highlights,(y,T)=>(d(),$(ce,{key:T,color:"success",class:"copy cursor-pointer","data-clipboard-text":y},{default:a(()=>[c(s(y),1)]),_:2},1032,["data-clipboard-text"]))),128))])]}),_:1}),e(N,{xs:24,md:12},{default:a(()=>[e(A,{model:r.value,class:"space-y-3"},{default:a(()=>{var f,v,y,T;return[e(_,{value:(f=m.value)==null?void 0:f.name,"addon-after":n("Sản phẩm"),disabled:""},null,8,["value","addon-after"]),e(_,{value:(v=m.value)==null?void 0:v.price_str,"addon-after":n("Giá gốc"),disabled:""},null,8,["value","addon-after"]),e(_,{value:(y=m.value)==null?void 0:y.discount,"addon-after":n("Giảm giá"),"addon-before":"%",disabled:""},null,8,["value","addon-after"]),((T=m.value)==null?void 0:T.type)=="addfriend"?(d(),h("div",qe,[e(_,{value:r.value.Tai_Khoan,"onUpdate:value":t[6]||(t[6]=k=>r.value.Tai_Khoan=k),placeholder:"admin#1234","addon-after":n("Tài khoản nhận")},null,8,["value","addon-after"]),e(P,{checked:r.value.isConfirm,"onUpdate:checked":t[7]||(t[7]=k=>r.value.isConfirm=k),class:"mt-2"},{default:a(()=>[c(s(n("Tôi đã kết bạn"))+" ",1),o("span",ze,s(n("TẤT CẢ")),1),c(" ingame ")]),_:1},8,["checked"])])):(d(),h("div",Je,[e(P,{checked:r.value.isConfirm,"onUpdate:checked":t[8]||(t[8]=k=>r.value.isConfirm=k)},{default:a(()=>[c(s(n("Tôi cung cấp đúng tài khoản và mật khẩu")),1)]),_:1},8,["checked"])]))]}),_:1},8,["model"])]),_:1})]),_:1})])):(d(),h("div",Qe,[e(O,{gutter:12,class:"space-y-3"},{default:a(()=>[e(N,{xs:24,md:12},{default:a(()=>{var f;return[o("div",We,[e(_,{value:r.value.Tai_Khoan,"onUpdate:value":t[9]||(t[9]=v=>r.value.Tai_Khoan=v),placeholder:n("Tài khoản"),"addon-after":n("Tài khoản")},null,8,["value","placeholder","addon-after"]),e(_,{value:r.value.Mat_Khau,"onUpdate:value":t[10]||(t[10]=v=>r.value.Mat_Khau=v),placeholder:n("Mật khẩu"),"addon-after":n("Mật khẩu"),type:"password"},null,8,["value","placeholder","addon-after"]),e(b,{value:r.value.Dang_Nhap_Bang,"onUpdate:value":t[11]||(t[11]=v=>r.value.Dang_Nhap_Bang=v),placeholder:"Chọn cách đăng nhập",style:{width:"100%"}},{default:a(()=>[e(p,{value:"Roblox"},{default:a(()=>[c(s(n("Đăng Nhập Bằng"))+" Roblox",1)]),_:1}),e(p,{value:"Riot"},{default:a(()=>[c(s(n("Đăng Nhập Bằng"))+" Riot",1)]),_:1}),e(p,{value:"Facebook"},{default:a(()=>[c(s(n("Đăng Nhập Bằng"))+" Facebook",1)]),_:1}),e(p,{value:"Google"},{default:a(()=>[c(s(n("Đăng Nhập Bằng"))+" Google",1)]),_:1}),e(p,{value:"Microsoft"},{default:a(()=>[c(s(n("Đăng Nhập Bằng"))+" Microsoft",1)]),_:1}),e(p,{value:"Other"},{default:a(()=>[c(s(n("Đăng Nhập ở đâu thì ghi chú")),1)]),_:1})]),_:1},8,["value"])]),o("div",null,[(d(!0),h(S,null,K((f=m.value)==null?void 0:f.highlights,(v,y)=>(d(),$(_e,{key:y,color:"red",text:v},null,8,["text"]))),128))])]}),_:1}),e(N,{xs:24,md:12},{default:a(()=>[e(A,{class:"space-y-3"},{default:a(()=>{var f,v,y,T;return[e(_,{value:(f=m.value)==null?void 0:f.name,"addon-after":n("Sản phẩm"),disabled:""},null,8,["value","addon-after"]),e(_,{value:(v=m.value)==null?void 0:v.price_str,"addon-after":n("Giá gốc"),disabled:""},null,8,["value","addon-after"]),e(_,{value:(y=m.value)==null?void 0:y.discount,"addon-after":n("Giảm giá"),"addon-before":"%",disabled:""},null,8,["value","addon-after"]),((T=m.value)==null?void 0:T.type)=="addfriend"?(d(),h("div",Xe,[e(_,{value:r.value.Ten_In_Game,"onUpdate:value":t[12]||(t[12]=k=>r.value.Ten_In_Game=k),placeholder:"admin#1234","addon-after":n("Tài khoản nhận")},null,8,["value","addon-after"]),e(P,{checked:r.value.isConfirm,"onUpdate:checked":t[13]||(t[13]=k=>r.value.isConfirm=k),class:"mt-2"},{default:a(()=>[c(s(n("Tôi đã kết bạn"))+" ",1),o("span",Ye,s(n("TẤT CẢ")),1),c(" ingame ")]),_:1},8,["checked"])])):(d(),h("div",Ze,[e(P,{checked:r.value.isConfirm,"onUpdate:checked":t[14]||(t[14]=k=>r.value.isConfirm=k)},{default:a(()=>[c(s(n("Tôi cung cấp đúng tài khoản và mật khẩu")),1)]),_:1},8,["checked"])]))]}),_:1})]),_:1})]),_:1})]))]}),_:1},8,["open","title"])])}}},j=ge({});j.use(be);j.component("item-index",et);j.mount("#app");

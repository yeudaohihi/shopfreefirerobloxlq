import{r as B,c as $,a as h,b as s,g as v,d as y,w as f,u as x,h as n,F as m,j as c,t as r,f as d,n as R,e as H,l as U,A as E}from"./chunk-1f342eb4.js";import{u as O}from"./chunk-7d43cceb.js";import{h as C,a as q}from"./chunk-12ee37c2.js";import"./chunk-e47d8634.js";const F={class:"overflow-auto"},j={class:"mb-5 flex flex-col gap-5 md:flex-row md:items-center"},L={class:"ltr:ml-auto rtl:mr-auto flex gap-x-2"},J=v("i",{class:"fas fa-search"},null,-1),Q={__name:"History",setup(A){const _=B(""),S=[{title:"ID",dataIndex:"id",sorter:!0},{title:$__t("Tài Khoản"),dataIndex:"username"},{title:$__t("Nội Dung"),dataIndex:"content"},{title:$__t("Địa Chỉ IP"),dataIndex:"ip_address"},{title:$__t("Thời Gian"),dataIndex:"created_at",sorter:!0},{title:$__t("Cập Nhật"),dataIndex:"updated_at",sorter:!0}],k=o=>q.get("/api/accounts/histories",{params:{search:_.value,...o}}),{data:D,current:w,totalPage:T,loading:I,pageSize:z,run:N,refresh:P}=O(k,{formatResult:o=>{const{data:t,meta:a}=o.data.data;return{data:t??[],totalPage:a.total_rows??0}},defaultParams:[{sort_by:"id",sort_type:"desc",limit:10}],pagination:{currentKey:"page",pageSizeKey:"limit"}}),b=(o,t=null)=>{if(o===null)return"";const a=C(o,C.ISO_8601);return a.isValid()?t?a.format(t):a.format("HH:mm:ss - DD/MM/YYYY"):""},g=$(()=>{var o;return((o=D.value)==null?void 0:o.data)??[]}),Y=$(()=>({page:w.value,total:T.value,limit:z.value})),K=(o,t,a)=>{N({page:o==null?void 0:o.current,limit:o.pageSize,sort_by:a.field,sort_type:a.order==="ascend"?"asc":"desc",...t})};return(o,t)=>{const a=h("a-input"),e=h("a-button"),M=h("a-table");return n(),s("div",F,[v("div",j,[v("div",L,[y(a,{value:_.value,"onUpdate:value":t[0]||(t[0]=p=>_.value=p),placeholder:"Search..."},null,8,["value"]),y(e,{type:"primary",loading:x(I),onClick:x(P)},{default:f(()=>[J]),_:1},8,["loading","onClick"])])]),y(M,{dataSource:g.value,columns:S,loading:x(I),pagination:Y.value,size:"small",onChange:K,class:"font-medium whitespace-nowrap"},{bodyCell:f(({column:p,text:u})=>[p.dataIndex==="created_at"?(n(),s(m,{key:0},[c(r(b(u)),1)],64)):d("",!0),p.dataIndex==="updated_at"?(n(),s(m,{key:1},[c(r(b(u)),1)],64)):d("",!0)]),_:1},8,["dataSource","loading","pagination"])])}}},W={class:"overflow-auto"},X={class:"mb-5 flex flex-col gap-5 md:flex-row md:items-center"},Z={class:"ltr:ml-auto rtl:mr-auto flex gap-x-2"},tt=v("i",{class:"fas fa-search"},null,-1),at=["data-clipboard-text"],et={__name:"Transaction",setup(A){const _=B(""),S=[{title:"ID",dataIndex:"id",sorter:!0},{title:$__t("Mã Giao Dịch"),dataIndex:"code",width:"13%"},{title:$__t("Số Dư Trước"),dataIndex:"balance_before"},{title:$__t("Số Tiền"),dataIndex:"amount"},{title:$__t("Số Dư Sau"),dataIndex:"balance_after"},{title:$__t("Nội Dung"),dataIndex:"content",width:"30%"},{title:$__t("Tài Khoản"),dataIndex:"username"},{title:$__t("Thời Gian"),dataIndex:"created_at",sorter:!0},{title:$__t("Cập Nhật"),dataIndex:"updated_at",sorter:!0}],k=t=>q.get("/api/accounts/transactions",{params:{search:_.value,...t}}),{data:D,current:w,totalPage:T,loading:I,pageSize:z,run:N,refresh:P}=O(k,{formatResult:t=>{const{data:a,meta:e}=t.data.data;return{data:a??[],totalPage:e.total_rows??0}},defaultParams:[{sort_by:"id",sort_type:"desc",limit:10}],pagination:{currentKey:"page",pageSizeKey:"limit"}}),b=(t,a=null)=>{if(t===null)return"";const e=C(t,C.ISO_8601);return e.isValid()?a?e.format(a):e.format("HH:mm:ss - DD/MM/YYYY"):""},g=(t,a="VND",e=2)=>$formatCurrency(t,a,e),Y=$(()=>{var t;return((t=D.value)==null?void 0:t.data)??[]}),K=$(()=>({page:w.value,total:T.value,limit:z.value})),o=(t,a,e)=>{N({page:t==null?void 0:t.current,limit:t.pageSize,sort_by:e.field,sort_type:e.order==="ascend"?"asc":"desc",...a})};return(t,a)=>{const e=h("a-input"),M=h("a-button"),p=h("a-table");return n(),s("div",W,[v("div",X,[v("div",Z,[y(e,{value:_.value,"onUpdate:value":a[0]||(a[0]=u=>_.value=u),placeholder:"Search..."},null,8,["value"]),y(M,{type:"primary",loading:x(I),onClick:x(P)},{default:f(()=>[tt]),_:1},8,["loading","onClick"])])]),y(p,{dataSource:Y.value,columns:S,loading:x(I),pagination:K.value,size:"small",onChange:o,class:"font-medium whitespace-nowrap"},{bodyCell:f(({column:u,text:l,record:i})=>[u.dataIndex==="code"?(n(),s("b",{key:0,style:{color:"#191D88"},class:"copy cursor-pointer","data-clipboard-text":l},r(l),9,at)):d("",!0),u.dataIndex==="balance_before"?(n(),s(m,{key:1},[c(r(g(l)),1)],64)):d("",!0),u.dataIndex==="amount"?(n(),s("span",{key:2,class:R(i.prefix==="-"?"text-danger-600":"text-green-600")},r(i.prefix)+" "+r(g(l)),3)):d("",!0),u.dataIndex==="balance_after"?(n(),s(m,{key:3},[c(r(g(l)),1)],64)):d("",!0),u.dataIndex==="created_at"?(n(),s(m,{key:4},[c(r(b(l)),1)],64)):d("",!0),u.dataIndex==="updated_at"?(n(),s(m,{key:5},[c(r(b(l)),1)],64)):d("",!0)]),_:1},8,["dataSource","loading","pagination"])])}}},nt={class:"overflow-auto"},ot={class:"mb-5 flex flex-col gap-5 md:flex-row md:items-center"},rt={class:"ltr:ml-auto rtl:mr-auto flex gap-x-2"},st=v("i",{class:"fas fa-search"},null,-1),lt=["data-clipboard-text"],dt={__name:"CardList",setup(A){const _=B(""),S=[{title:"ID",dataIndex:"id",sorter:!0},{title:$__t("Mã Giao Dịch"),dataIndex:"transaction_code",width:"13%"},{title:$__t("Số Serial"),dataIndex:"serial"},{title:$__t("Mã Thẻ"),dataIndex:"code"},{title:$__t("Thực Nhận"),dataIndex:"amount"},{title:$__t("Mệnh Giá"),dataIndex:"value"},{title:$__t("Ghi Chú"),dataIndex:"content"},{title:$__t("Trạng Thái"),dataIndex:"status"},{title:$__t("Tài Khoản"),dataIndex:"username"},{title:$__t("Thời Gian"),dataIndex:"created_at",sorter:!0},{title:$__t("Cập Nhật"),dataIndex:"updated_at",sorter:!0}],k=t=>q.get("/api/accounts/card-list",{params:{search:_.value,...t}}),{data:D,current:w,totalPage:T,loading:I,pageSize:z,run:N,refresh:P}=O(k,{formatResult:t=>{const{data:a,meta:e}=t.data.data;return{data:a??[],totalPage:e.total_rows??0}},defaultParams:[{sort_by:"id",sort_type:"desc",limit:10}],pagination:{currentKey:"page",pageSizeKey:"limit"}}),b=(t,a=null)=>{if(t===null)return"";const e=C(t,C.ISO_8601);return e.isValid()?a?e.format(a):e.format("HH:mm:ss - DD/MM/YYYY"):""},g=(t,a="VND",e=2)=>$formatCurrency(t,a,e),Y=$(()=>{var t;return((t=D.value)==null?void 0:t.data)??[]}),K=$(()=>({page:w.value,total:T.value,limit:z.value})),o=(t,a,e)=>{N({page:t==null?void 0:t.current,limit:t.pageSize,sort_by:e.field,sort_type:e.order==="ascend"?"asc":"desc",...a})};return(t,a)=>{const e=h("a-input"),M=h("a-button"),p=h("a-tag"),u=h("a-table");return n(),s("div",nt,[v("div",ot,[v("div",rt,[y(e,{value:_.value,"onUpdate:value":a[0]||(a[0]=l=>_.value=l),placeholder:"Search..."},null,8,["value"]),y(M,{type:"primary",loading:x(I),onClick:x(P)},{default:f(()=>[st]),_:1},8,["loading","onClick"])])]),y(u,{dataSource:Y.value,columns:S,loading:x(I),pagination:K.value,size:"small",onChange:o,class:"font-medium whitespace-nowrap"},{bodyCell:f(({column:l,text:i,record:G})=>[l.dataIndex==="transaction_code"?(n(),s("b",{key:0,style:{color:"#191D88"},class:"copy cursor-pointer","data-clipboard-text":i},r(i??"- KO CÓ -"),9,lt)):d("",!0),l.dataIndex==="balance_before"?(n(),s(m,{key:1},[c(r(g(i)),1)],64)):d("",!0),l.dataIndex==="amount"?(n(),s("span",{key:2,class:R(i===0?"text-danger-600":"text-green-600")},r(g(i)),3)):d("",!0),l.dataIndex==="status"?(n(),s(m,{key:3},[i==="Processing"?(n(),H(p,{key:0,color:"warning"},{default:f(()=>[c(r(G.status_str),1)]),_:2},1024)):i==="Cancelled"?(n(),H(p,{key:1,color:"red"},{default:f(()=>[c(r(G.status_str),1)]),_:2},1024)):i==="Error"?(n(),H(p,{key:2,color:"red"},{default:f(()=>[c(r(G.status_str),1)]),_:2},1024)):i==="Completed"?(n(),H(p,{key:3,color:"success"},{default:f(()=>[c(r(G.status_str),1)]),_:2},1024)):d("",!0)],64)):d("",!0),l.dataIndex==="value"?(n(),s(m,{key:4},[c(r(g(i)),1)],64)):d("",!0),l.dataIndex==="created_at"?(n(),s(m,{key:5},[c(r(b(i)),1)],64)):d("",!0),l.dataIndex==="updated_at"?(n(),s(m,{key:6},[c(r(b(i)),1)],64)):d("",!0)]),_:1},8,["dataSource","loading","pagination"])])}}},V=U({});V.use(E);V.component("account-history",Q);V.component("account-card-list",dt);V.component("account-transaction",et);V.mount("#app");

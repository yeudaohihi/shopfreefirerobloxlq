import{r as k,c as se,o as le,a as c,b as _,d as u,w as l,g as a,e as g,f as V,h as i,F as C,i as T,j as h,k as re,t as v,n as B,l as ie,A as ce}from"./chunk-1f342eb4.js";import"./chunk-e47d8634.js";const ue=["onSubmit"],de={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},pe=a("label",{for:"form-label"},"Chọn mức giá: ",-1),_e=a("label",{for:"form-label"},"Tìm kiếm: ",-1),ge={class:"grid grid-cols-2 gap-3"},me=a("div",null,[a("button",{class:"btn btn-sm btn-primary w-full lg:mt-[22px]"},[a("i",{class:"fas fa-search"}),h(" Tìm kiếm ")])],-1),fe=a("i",{class:"fas fa-trash"},null,-1),ve={class:"p-3"},he={class:"grid grid-cols-2 mb-3 gap-3"},be=a("i",{class:"fa-solid fa-check-circle"},null,-1),we=a("i",{class:"fa-solid fa-star"},null,-1),xe=a("i",{class:"fa-solid fa-check-circle"},null,-1),ye={class:"text-center grid grid-cols-2 gap-3"},ke=a("i",{class:"fas fa-credit-card me-2"},null,-1),Ce=["onClick"],Te=a("i",{class:"fas fa-shopping-cart me-2"},null,-1),Ie=a("span",null,"Chi tiết",-1),Se=[Te,Ie],Be={class:"text-center mt-3"},$e={class:"list-none"},Pe={class:"inline-block"},Me=a("i",{class:"fas fa-arrow-left"},null,-1),Ue=[Me],Fe=["onClick"],Ee={class:"inline-block"},je=a("i",{class:"fas fa-arrow-right"},null,-1),Le=[je],Ne={__name:"Index",props:{groupId:{type:String,default:0}},setup(A){const D=A,b=k({price:"",search:""}),o=k({page:1,limit:16,total_rows:0,total_page:0,visible_pages:[]}),K=se(()=>{const{page:e,total_page:n,visible_pages:s}=o.value,d=5;let f=Math.max(e-Math.floor(d/2),1),x=Math.min(f+d-1,n);return x-f+1<d&&(f=Math.max(x-d+1,1)),Array.from({length:x-f+1},(U,y)=>f+y)}),Q=e=>{o.value.page!==e&&(o.value.page=e,p())},O=()=>{o.value.page<=1||(o.value.page--,p())},q=()=>{o.value.page>=o.value.total_page||(o.value.page++,p())},z=k([{label:"Tất cả",value:""},{label:"Dưới 100.000đ",value:"0-100000"},{label:"100.000đ - 200.000đ",value:"100000-200000"},{label:"200.000đ - 500.000đ",value:"200000-500000"},{label:"500.000đ - 1.000.000đ",value:"500000-1000000"},{label:"1.000.000đ - 2.000.000đ",value:"1000000-2000000"},{label:"2.000.000đ - 5.000.000đ",value:"2000000-5000000"},{label:"5.000.000đ - 10.000.000đ",value:"5000000-10000000"},{label:"Trên 10.000.000đ",value:"10000000-0"}]),w=k(!1),I=k([]),p=async()=>{var e,n;w.value=!0;try{const{data:s}=await axios.get("/api/stores/accounts",{params:{...b.value,group_id:D.groupId,...o.value}});m("page")!==null&&o.value.page!==parseInt(m("page"))&&M("product_id"),o.value.page!==1?P("page",o.value.page):M("page"),I.value=((e=s.data)==null?void 0:e.data)||[],o.value=((n=s.data)==null?void 0:n.meta)||[]}catch(s){Swal.fire("Thất Bại",$catchMessage(s),"error")}finally{const s=m("product_id");setTimeout(s?()=>{const d=document.getElementById("card_"+s);d&&d.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}:Z,500),setTimeout(()=>{w.value=!1},600)}},G=()=>{o.value.page=1,p()},H=()=>{b.value={price:"",search:""},o.value.page=1,p()},J=(e,n="VND",s=2)=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(e)+" ₫",W=async e=>{if((await Swal.fire({icon:"question",title:"Bạn chắc chứ?",text:`Bạn sẽ mua TK #${e.code} với giá ${e.price_str}?`,showCancelButton:!0,confirmButtonText:"Mua ngay",cancelButtonText:"Hủy bỏ"})).isConfirmed===!0){Swal.fire({icon:"info",title:"Đang xử lý!",html:"Không được tắt trang này, vui lòng đợi trong giây lát!",timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{}});try{const{data:s}=await axios.post("/api/stores/accounts/"+e.code+"/buy");Swal.fire("Thành Công",s.message,"success").then(()=>{window.open("/account/orders/accounts/"+e.code,"_self")})}catch(s){Swal.fire("Thất Bại",$catchMessage(s),"error")}}},X=e=>{P("product_id",e.code),window.open("/tai-khoan/thong-tin/"+e.code,"_self")},S=()=>{const e=["#C70039","#2E4374","#219C90","#EE9322","#5B0888","#004225","#9400FF"];return e[Math.floor(Math.random()*e.length)]},Y=e=>typeof e=="string"||e instanceof String,Z=()=>{window.scrollTo({top:0,behavior:"smooth"})},P=(e,n)=>{if(parseInt(m(e))===parseInt(n))return;const s=new URL(window.location.href);s.searchParams.set(e,n),window.history.pushState({},"",s)},M=e=>{if(m(e)===null)return;const n=new URL(window.location.href);n.searchParams.delete(e),window.history.pushState({},"",n)},m=e=>new URL(window.location.href).searchParams.get(e),ee=e=>new URL(window.location.href).searchParams.get("product_id")===e;return window.addEventListener("popstate",()=>{const e=m("page");e&&o.value.page!==parseInt(e)?(o.value.page=parseInt(e),p()):!e&&o.value.page!==1&&(o.value.page=1,p())}),le(()=>{const e=m("page");e&&(o.value.page=parseInt(e)),p()}),(e,n)=>{var R;const s=c("a-select-option"),d=c("a-select"),f=c("a-input"),x=c("a-spin"),U=c("a-image"),y=c("a-tag"),te=c("a-button"),F=c("a-tooltip"),E=c("a-badge-ribbon"),j=c("a-col"),L=c("a-row"),ae=c("a-skeleton"),N=c("a-card"),ne=c("a-empty");return i(),_("section",null,[u(x,{spinning:w.value},{default:l(()=>[a("form",{class:"mb-5 mt-5",onSubmit:re(G,["prevent"])},[a("div",de,[a("div",null,[pe,u(d,{value:b.value.price,"onUpdate:value":n[0]||(n[0]=t=>b.value.price=t),placeholder:"Chọn mức giá",style:{width:"100%"}},{default:l(()=>[(i(!0),_(C,null,T(z.value,t=>(i(),g(s,{key:t.value,value:t.value},{default:l(()=>[h(v(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),a("div",null,[_e,u(f,{value:b.value.search,"onUpdate:value":n[1]||(n[1]=t=>b.value.search=t),placeholder:"Tìm kiếm mã sản phẩm, trang phục,...",style:{width:"100%"}},null,8,["value"])]),a("div",ge,[me,a("div",null,[a("button",{class:"btn btn-sm btn-danger w-full lg:mt-[22px]",type:"button",onClick:n[2]||(n[2]=t=>H())},[fe,h(" Đặt lại ")])])])])],40,ue)]),_:1},8,["spinning"]),a("div",null,[w.value?(i(),g(L,{key:1,gutter:18},{default:l(()=>[(i(),_(C,null,T(16,t=>u(j,{xs:12,sm:8,lg:6,key:t},{default:l(()=>[u(N,{class:"mb-3 h-[303px]"},{default:l(()=>[u(ae,{active:""})]),_:1})]),_:2},1024)),64))]),_:1})):(i(),g(L,{key:0,gutter:18},{default:l(()=>[(i(!0),_(C,null,T(I.value,t=>(i(),g(j,{xs:24,md:8,lg:6,key:t.id,class:"mb-2 mt-2 cursor-pointer",id:`card_${t.code}`},{default:l(()=>[u(E,{color:"red",text:`-${t.discount}%`,class:B({hidden:t.discount<=0}),placement:"start"},{default:l(()=>[u(E,{color:"pink",text:`MS: ${t.code}`,placement:"end"},{default:l(()=>[a("div",{style:{background:"transparent"},class:B(["border border-primary rounded-lg p-[1px]",{"card-active":ee(t.code)}])},[u(U,{src:t.image,alt:t.name,width:"100%",height:"sm:200px lg:170px",class:"rounded-t-lg"},null,8,["src","alt"]),a("div",ve,[a("div",he,[(i(!0),_(C,null,T(t.highlights,(r,oe)=>(i(),_("div",{key:oe,class:"lg:col-span-1"},[Y(r)?(i(),g(y,{key:0,color:S(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:l(()=>[be,h(" "+v(r),1)]),_:2},1032,["color"])):(r==null?void 0:r.name)!==void 0&&(r==null?void 0:r.value)!=="undefined"?(i(),g(y,{key:1,color:S(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:l(()=>[we,h(" "+v(r.name)+": "+v(r.value),1)]),_:2},1032,["color"])):(r==null?void 0:r[0])!==void 0?(i(),g(y,{key:2,color:S(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:l(()=>[xe,h(" "+v(r[0]),1)]),_:2},1032,["color"])):V("",!0)]))),128))]),a("div",ye,[u(F,{title:t.discount!==0?`Giá gốc ${J(t.price)}`:""},{default:l(()=>[u(te,{type:"dashed",block:"",onClick:r=>W(t),class:"dark:text-white"},{default:l(()=>[ke,h(" "+v(t.price_str),1)]),_:2},1032,["onClick"])]),_:2},1032,["title"]),u(F,{title:t.name},{default:l(()=>[a("button",{class:"btn btn-sm btn-primary w-full",onClick:r=>X(t)},Se,8,Ce)]),_:2},1032,["title"])])])],2)]),_:2},1032,["text"])]),_:2},1032,["text","class"])]),_:2},1032,["id"]))),128))]),_:1}))]),((R=I.value)==null?void 0:R.length)===0&&!w.value?(i(),g(N,{key:0},{default:l(()=>[u(ne,{description:"Không tìm thấy tài khoản nào trong nhóm này"})]),_:1})):V("",!0),a("div",Be,[u(x,{spinning:w.value},{default:l(()=>[a("ul",$e,[a("li",Pe,[a("a",{href:"javascript:void(0)",onClick:n[3]||(n[3]=t=>O()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px] pl-2"},Ue)]),(i(!0),_(C,null,T(K.value,t=>(i(),_("li",{key:t,class:"inline-block"},[a("a",{href:"javascript:void(0)",onClick:r=>Q(t),class:B(["flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300",{"p-active":o.value.page===t}])},v(t!==-1?t:"..."),11,Fe)]))),128)),a("li",Ee,[a("a",{href:"javascript:void(0)",onClick:n[4]||(n[4]=t=>q()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px]"},Le)])])]),_:1},8,["spinning"])])])}}},$=ie({});$.use(ce);$.component("account-index",Ne);$.mount("#app");
